@(userWithSocial: UserWithSocial, bookmarks: Seq[Bookmark], socialUserInfos: Seq[SocialUserInfo], rawInfos: Seq[SocialUserRawInfo], socialConnections: Seq[SocialUserInfo], fortyTwoConnections: Seq[UserWithSocial])

@userWithFacebookDisplay(userWithSocial: UserWithSocial) = {
  <span style="margin:2px">
    <a data-hover="tooltip" title="@userWithSocial.user.firstName @userWithSocial.user.lastName+" class="name_tooltip_link" href="http://www.facebook.com/@userWithSocial.socialUserInfo.socialId.id" target="_blank">
      <img src="https://graph.facebook.com/@userWithSocial.socialUserInfo.socialId.id/picture?type=square" width="30" height="30" alt=""/>
      @userWithSocial.socialUserInfo.socialId.id
    </a>
  </span>
}

@admin("User: " + userWithSocial.user.firstName + " " + userWithSocial.user.lastName) {
  <h2>User details </h2>
   <button onclick="refreshAllSociaUserInfo()">Refresh Social User Info!</button>
  <table class="table table-bordered">
      <tr>
        <th>Name</th><td>@userWithSocial.user.firstName @userWithSocial.user.lastName</td>
      </tr>
      <tr>
        <th>Id</th><td>@userWithSocial.user.id</td>
      </tr>
      <tr>
        <th>Facebook Account</th><td>@userWithFacebookDisplay(userWithSocial)</td>
      </tr>
      <tr>
        <th>Created At</th><td>@adminHelper.dateDisplay(userWithSocial.user.createdAt) @adminHelper.timeDisplay(userWithSocial.user.createdAt)</td>
      </tr>
      <tr>
        <th>Last Update</th><td>@adminHelper.dateDisplay(userWithSocial.user.updatedAt) @adminHelper.timeDisplay(userWithSocial.user.updatedAt)</td>
      </tr>
      <tr>
        <th>OAuth</th><td><textarea rows="3">@socialUserInfos</textarea></td>
      </tr>
      <tr>
        <th>Social Raw info</th><td><textarea rows="3">@rawInfos</textarea></td>
      </tr>
      <tr>
        <th>Social User</th>
        <td>@for(socialUserInfo <-socialUserInfos) {
            @adminHelper.socialUserDisplay(socialUserInfo, true) &nbsp; 
        }</td>
      </tr>
  </table>
    
  <h2>User connected to @fortyTwoConnections.size FortyTwo Users</h2>
  <div class="scrollArea">
    @for(userWithSocial <- fortyTwoConnections) {
        @adminHelper.userDisplay(userWithSocial)<br/>
    }
  </div>
  
  <h2>User connected to @socialConnections.size Social Users</h2>
  <div class="scrollArea">
    @for(socialConnection <- socialConnections) {
      @adminHelper.socialUserDisplay(socialConnection)<br/>
    }
  </div>
  
  <h2>User kept @bookmarks.size Bookmarks</h2>

  <div class="scrollArea">
		<table class="table table-bordered">
		    <tr>
		      <th>BID</th>
		      <th>Bookmark</th>
		      <th>Source</th>
		    </tr>
		 @for(bookmark <- bookmarks) {
		   <tr>
		        <td>#@bookmark.id.get.id</td>
		        <td>@adminHelper.bookmarkDisplay(bookmark)</td>
		        <td>@bookmark.source</td>
		   </tr>
		 }
		</table>
  </div>

  <script type="text/javascript">
    function refreshAllSociaUserInfo() {
      location.href="@com.keepit.controllers.routes.UserController.refreshAllSocialInfo(userWithSocial.user.id.get)"
    }
  </script>
}