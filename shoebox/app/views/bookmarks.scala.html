@(bookmarksAndUsers: Seq[(Bookmark, User)])

@userWithFacebookDisplay(user: User, facebookId: FacebookId) = {
  <span style="margin:2px">
    <a data-hover="tooltip" title="@user.firstName @user.lastName+" class="name_tooltip_link" href="http://www.facebook.com/@facebookId" target="_blank">
      <img src="https://graph.facebook.com/@facebookId/picture?type=square" width="30" height="30" alt=""/>
    </a>
  </span>
}

@userWithoutFacebookDisplay(user: User) = {
  <span style="margin:2px; font-size:50%">
    No Facebook Id:</br>(@user.id.get) @user.firstName
  </span>
}

<!DOCTYPE html>

<html>
    <head>
        <title>All Bookmarks</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    </head>
    <body>
		  <table>
		    <tr>
		      <th>User</th>
		      <th>Id</th>
		      <th></th>
		      <th>Title</th>
		    </tr>
		  @for((bookmark, user) <- bookmarksAndUsers) {
		    <tr>
		      <td>
		        @{user.facebookId match {
              case Some(id) => {
                userWithFacebookDisplay(user, id)
		          }
		          case None => {
	  	          userWithoutFacebookDisplay(user)
		          }
		        }}
		      </td>
		      <td>@bookmark.id.get.id</td>
		      <td><a href="@com.keepit.controllers.routes.BookmarksController.edit(bookmark.id.get)">edit</td>
		      <td><a href="@bookmark.url">@bookmark.title</a></td>
		    </tr>
		  }
		  </table>
    </body>
</html>
