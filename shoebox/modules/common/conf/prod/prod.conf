## Config file for settings common to production servers

java.source=1.6

service {
 search {
   host = "search"
   port = 9000
 }
 shoebox {
   host = "shoebox"
   port = 9000
 }
}

# Secret key
# ~~~~~
# The secret key is used to secure cryptographics functions.
# If you deploy your application to several instances be sure to use the same key!
application.secret="eylNdNAWC:icXZ/JxXVwLTL9>mRrOjxvh7=6YrqtZKX7h62qwuTLrH=F1]a1j:G?"

# The application language and session
# ~~~~~
application.langs="en"

session = {
  cookieName="KIFI_SESSION"
  httpOnly=true
  maxAge=31536000
  secure=false //enable this only when we'll move to full https
  domain=.kifi.com
}

# Database configuration
# ~~~~~
# db connection pool
# updating bonecp, trying to resolve "Timed out waiting for a free available connection" exception
# http://stackoverflow.com/a/15500442/81698
db.shoebox.idleMaxAge=10 minutes
db.shoebox.idleConnectionTestPeriod=30 seconds
db.shoebox.connectionTimeout=20 second
db.shoebox.connectionTestStatement="SELECT 1"
db.shoebox.maxConnectionAge=30 minutes
db.shoebox.partitionCount=4
db.shoebox.maxConnectionsPerPartition=6
db.shoebox.minConnectionsPerPartition=4
db.shoebox.setLogStatementsEnabled=true

# shoebox database
db.shoebox.driver=com.mysql.jdbc.Driver
db.shoebox.url="jdbc:mysql://shoebox.c1jga8odi83l.us-west-1.rds.amazonaws.com:3306/shoebox?autoReconnect=true&useUnicode=yes&characterEncoding=UTF-8"
db.shoebox.user=shoebox

# Application configuration
# ~~~~~
application.baseUrl="http://www.kifi.com"

# Evolutions
# ~~~~~
evolutionplugin=disabled

# Amazon Resources
# ~~~~~
amazon.s3 = {
  # http://en.wikipedia.org/wiki/Places_in_The_Hitchhiker's_Guide_to_the_Galaxy
  article.bucket = "zarss-b-prod"
  social.bucket = "kakrafoon-b-prod"
  event.bucket = "arcturus-b-prod"
  report.bucket = "betelgeuse-b-prod"
  articleSearch.bucket = "article-search-results-b-prod"
  accessKey = "AKIAJA24QAUWFTZN5JTQ"
  secretKey = "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"
}

cdn {
  bucket = "images-b-prod"
  base = "//djty7jcqog9qu.cloudfront.net"
}

# Mongo Resources
# ~~~~~
mongo = {
  events.server = "b03"
  events.database = "events"
}

# Search Resources
# ~~~~~
index.article.directory = "../../index/article"
index.urigraph.directory = "../../index/urigraph"
index.collection.directory = "../../index/collection"
index.phrase.directory = "../../index/phrase"
index.spell.directory = "../../index/spell"

index.config = "../../index/config"

#proxy = {
#  host = localhost
#  port = 8080
#  protocol = http
#}

# result click tracker
result-click-tracker = {
  dir = "../../index/resultClickTracker"
  numHashFuncs = 10
  syncEvery = 100
}

# click history tracker
click-history-tracker = {
  filterSize = 307
  numHashFuncs = 2
  minHits = 1
}

# browsing history tracker
browsing-history-tracker = {
  filterSize = 3067
  numHashFuncs = 2
  minHits = 1
}

# browsing history tracker
slider-history-tracker = {
  filterSize = 8191
  numHashFuncs = 2
  minHits = 1
}

# ~~~~~~~~~~~~~~~~~~
# Mail to Keep
# ~~~~~~~~~~~~~~~~~~
mailtokeep.username = "keep@kifi.com"
mailtokeep.password = "m7N71k0Yd85RFlOr"

# ~~~~~~~~~~~~~~~~~~
# Statsd
# ~~~~~~~~~~~~~~~~~~
statsd {
  enabled = true
  stat.prefix = "29fd6670-4ac9-4c46-8111-d5f80a5f6a57"
  routes.prefix = "routes"
  routes.combined.prefix = "routes.combined"
  host = "statsd.hostedgraphite.com"
  port = 8125
}

# ~~~~~~~~~~~~~~~~~~
# Cache Resources
# ~~~~~~~~~~~~~~~~~~
elasticache.config.endpoint="zz9pluralzalpha.g4hldh.cfg.usw1.cache.amazonaws.com:11211"

ehcacheplugin=enabled

# ~~~~~~~~~~~~~~~~~~
#      Includes
# ~~~~~~~~~~~~~~~~~~
include "prod-securesocial.conf"
include "prod-akka-sync.conf"
