var KifiNotification={defaultParams:{wrapperClass:"",fadeInMs:300,fadeOutMs:100,showForMs:4E3,image:"",link:"",contentHtml:"",sticky:!1,popupClass:"",clickAction:$.noop,closeOnClick:!0},add:function(a){a.click&&"string"==typeof a.click&&(a.click=function(){document.location=a.click});a=$.extend(this.defaultParams,a);0==$("#kifi-notify-notice-wrapper").length&&$("body").append('<div id="kifi-notify-notice-wrapper"></div>');render("html/notify_box.html",{title:a.title,contentHtml:a.contentHtml,image:""!=
a.image?'<img src="'+a.image+'" class="kifi-notify-image" />':"",popupClass:a.popupClass,innerClass:""!=a.image?"kifi-notify-with-image":"kifi-notify-without-image",link:a.link},function(c){var b=$(c);$("#kifi-notify-notice-wrapper").addClass(a.wrapperClass).append(b);$(["beforeOpen","afterOpen","beforeClose","afterClose"]).each(function(c,d){b.data(d,$.isFunction(a[d])?a[d]:$.noop)});b.fadeIn(a.fadeInMs,function(){b.data("afterOpen")()});a.sticky||KifiNotification.startFadeTimer(b,a);b.bind("mouseenter",
function(){a.sticky||(clearTimeout(b.data("fadeOutTimer")),b.stop().css({opacity:"",height:""}))}).bind("mouseleave",function(){a.sticky||KifiNotification.startFadeTimer(b,a)}).bind("click",function(){a.closeOnClick&&KifiNotification.removeSpecific(b,{},!0);a.clickAction()});b.find(".kifi-notify-close").click(function(){KifiNotification.removeSpecific(b,{},!0)})});return!0},fadeItem:function(a,c,b){c=c||{};var e="undefined"!=typeof c.fade?c.fade:!0;c=c.fadeOutMs||300;a.data("beforeClose")(a,b);b&&
a.unbind("mouseenter mouseleave");var d=function(a,b){a.data("afterClose")(a,b);a.remove();0==$(".kifi-notify-item-wrapper").length&&$("#kifi-notify-notice-wrapper").remove()};e?a.animate({opacity:0},c).animate({height:0},300,function(){d(a,b)}):d(a,b)},removeSpecific:function(a,c,b){this.fadeItem(a,c||{},b)},startFadeTimer:function(a,c){a.data("fadeOutTimer",setTimeout(function(){KifiNotification.fadeItem(a,c)},c.showForMs))},stop:function(a){a.beforeClose=a.beforeClose||$.noop;a.beforeClose=a.beforeClose||
$.noop;var c=$("#kifi-notify-notice-wrapper");a.beforeClose(c);c.fadeOut(function(){$(this).remove();a.afterClose()})}};