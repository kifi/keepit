"use strict";angular.module("kifi",["ngCookies","ngResource","ngRoute","ngSanitize","ngAnimate","ui.bootstrap","util","dom","antiscroll","infinite-scroll","angularMoment","focusWhen","kifi.templates","kifi.profileCard","kifi.profileService","kifi.detail","kifi.tags","kifi.keeps","kifi.keep","kifi.layout.leftCol","kifi.layout.main","kifi.layout.nav","kifi.layout.rightCol"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){b.html5Mode(!0).hashPrefix("!"),a.otherwise({redirectTo:"/"}),c.defaults.withCredentials=!0}]).factory("env",["$location",function(a){var b=a.host(),c=/^dev\.ezkeep\.com|localhost$/.test(b),d="9000"===a.port(),e=d?a.protocol()+"//"+b:"https://www.kifi.com";return{local:d,dev:c,production:!c,xhrBase:e+"/site",xhrBaseEliza:e.replace("www","eliza")+"/eliza/site",xhrBaseSearch:e.replace("www","search")+"/search",picBase:(d?"//d1scct5mnc9d9m":"//djty7jcqog9qu")+".cloudfront.net"}}]).controller("AppCtrl",[function(){}]),angular.module("antiscroll",[]).directive("antiscroll",["$timeout",function(a){function b(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}return{restrict:"A",transclude:!0,link:function(b,c,d){var e;d.antiscroll&&(e=b.$eval(d.antiscroll)),b.scroller=c.antiscroll(e).data("antiscroll"),b.refreshScroll=function(){return a(function(){b.scroller&&b.scroller.refresh()})},b.refreshScroll()},template:function(a,c){var d='<div class="antiscroll-inner"';return"antiInfiniteScroll"in c&&angular.forEach(["antiInfiniteScroll","antiInfiniteScrollDistance","antiInfiniteScrollDisabled","antiInfiniteScrollImmediateCheck"],function(a){a in c&&(d+=" "+b(a).substring(5)+'="'+c[a]+'"')}),d+=" ng-transclude></div>"}}}]),angular.module("focusWhen",[]).directive("focusWhen",["$timeout",function(a){return{restrict:"A",scope:{focusWhen:"="},link:function(b,c){function d(){c.focus(),b.focusWhen=!1}b.$watch("focusWhen",function(b){b&&a(d)})}}}]),angular.module("dom",[]).value("dom",{scrollIntoViewLazy:function(a,b){var c;if(a&&(c=a.offsetParent)){var d=c.scrollTop,e=c.clientHeight,f=d+e,g=a.offsetTop,h=g+a.offsetHeight;h>f?c.scrollTop=h+(b||0)-e:d>g&&(c.scrollTop=g-(b||0))}}}),angular.module("kifi.me",[]).service("me",function(){return{replace:!0,restrict:"A",templateUrl:"profileCard/profileCard.tpl.html",link:function(a){a.firstName="Joon Ho",a.lastName="Cho",a.description="Porting to Angular.js"}}}),angular.module("util",[]).value("util",{startsWith:function(a,b){return a===b||0===a.lastIndexOf(b,0)},endsWith:function(a,b){return a===b||-1!==a.indexOf(b,a.length-b.length)}}),angular.module("kifi.detail",["kifi.keepService"]).directive("kfDetail",["keepService",function(a){return{replace:!0,restrict:"A",templateUrl:"detail/detail.tpl.html",link:function(b){b.getLength=function(){return a.getSelectedLength()},b.showSingleKeep=function(){return a.getPreviewed()&&a.getSelectedLength()<=1},b.getTitleText=function(){var b=a.getSelectedLength();return 1===b?a.getFirstSelected().title:b+" Keeps selected"},b.getPreviewed=function(){return a.getPreviewed()},b.getSelected=function(){return a.getSelected()}}}}]).directive("kfKeepDetail",[function(){return{replace:!0,restrict:"A",templateUrl:"detail/keepDetail.tpl.html",link:function(){}}}]),angular.module("kifi.keep",[]).controller("KeepCtrl",["$scope",function(){}]).directive("kfKeep",["$document",function(a){return{restrict:"A",scope:!0,controller:"KeepCtrl",templateUrl:"keep/keep.tpl.html",link:function(b){function c(a){if(a&&a.length)for(var c=0,d=a.length;d>c;c++)if(b.isExampleTag(a[c]))return!0;return!1}function d(a,b){k.href=a;var c=k.hostname,d=a.indexOf(c),f=c.match(l);f&&(d+=f.index,c=f[0]);var g=k.pathname,h=a.indexOf(g,d+c.length),i=g.match(m);i&&(h+=i.index,g=i[0]),g=g.replace(n," ").trimRight();for(var j=b&&b.length;j--;){var o=b[j],p=o[0],q=o[1];p>=h&&p<h+g.length?g=e(g,p-h,q):p>=d&&p<d+c.length&&(c=e(c,p-d,q))}return g=g.trimLeft(),c+(g?" Â· "+g:"")}function e(a,b,c){return a.substr(0,b)+"<b>"+a.substr(b,c)+"</b>"+a.substr(b+c)}function f(a){return a.title||d(a.url)}function g(a,b){var c=(a.match(o)||[""])[0].length;a=a.substr(c).replace(p,"$1");for(var d=b&&b.length;d--;)b[d][0]-=c;return h(a,b)}function h(a,b){for(var c=b&&b.length;c--;){var d=b[c],f=d[0];f>=0&&(a=e(a,f,d[1]))}return a}function i(){b.keep.titleHtml=f(b.keep)}function j(){b.keep.descHtml=g(b.keep.url)}b.isMine=function(){return b.keep.isMyBookmark||!1},b.isPrivate=function(){return b.keep.isPrivate||!1},b.isExampleTag=function(a){return"example keep"===(a&&a.name&&a.name.toLowerCase())},b.getTags=function(){return b.keep.tagList},b.isExample=function(){var a=b.keep;return null==a.isExample&&(a.isExample=c(b.getTags())),a.isExample};var k=a[0].createElement("a"),l=/[^.\/]+(?:\.[^.\/]{1,3})?\.[^.\/]+$/,m=/[^\/]+?(?=(?:\.[a-zA-Z0-9]{1,6}|\/|)$)/,n=/[\/._-]/g,o=/^https?:\/\//,p=/^([^\/]*)\/$/;i(),j(),b.$watch("keep.title",function(){i()}),b.$watch("keep.url",function(){i(),j()}),b.getTitle=function(){var a=b.keep;return a.title||a.url},b.getPicUrl=function(a){return"//djty7jcqog9qu.cloudfront.net/users/"+a.id+"/pics/100/"+a.pictureName},b.getName=function(a){return(a.firstName||"")+" "+(a.lastName||"")},b.hasKeepers=function(){var a=b.keep;return!(!a.keepers||!a.keepers.length)},b.showOthers=function(){return!b.hasKeepers()&&!!b.keep.others},b.getFriendText=function(){var a=b.keep.keepers,c=a&&a.length||0;return 1===a.length?"1 friend":c+" friends"},b.getOthersText=function(){var a=b.keep.others||0;return 1===a?"1 other":a+" others"},b.isOnlyMine=function(){return!b.hasKeepers()&&!b.keep.others},b.isSelected=function(){return b.isSelectedKeep(b.keep)},b.isPreviewed=function(){return b.isPreviewedKeep(b.keep)},b.onCheck=function(a){return a.stopPropagation(),b.toggleSelectKeep(b.keep)}}}}]),angular.module("kifi.keepService",[]).factory("keepService",["$http","env",function(a,b){function c(a){return a?"string"==typeof a?a:a.id||null:null}var d=[],e={},f=null,g=null,h=30,i={list:d,getPreviewed:function(){return g||null},isPreviewed:function(a){return!!g&&g===a},preview:function(a){return g=a||null},togglePreview:function(a){return i.preview(i.isPreviewed(a)?null:a)},isSelected:function(a){var b=c(a);return b?e.hasOwnProperty(b):!1},select:function(a){var b=c(a);return b?(e[b]=!0,!0):!1},unselect:function(a){var b=c(a);return b?(delete e[b],!0):!1},toggleSelect:function(a){return i.isSelected(a)?i.unselect(a):i.select(a)},getFirstSelected:function(){var a=_.keys(e)[0];if(!a)return null;for(var b,c=0,f=d.length;f>c;c++)if(b=d[c],b.id===a)return b;return null},getSelectedLength:function(){return _.keys(e).length},getSelected:function(){return d.filter(function(a){return a.id in e})},selectAll:function(){e=_.reduce(d,function(a,b){return a[b.id]=!0,a},{})},unselectAll:function(){e={}},isSelectedAll:function(){return d.length&&d.length===i.getSelectedLength()},toggleSelectAll:function(){return i.isSelectedAll()?i.unselectAll():i.selectAll()},resetList:function(){f=null,d.length=0},getList:function(c){var e=b.xhrBase+"/keeps/all";c=c||{},c.count=c.count||h,c.before=f||void 0;var g={params:c};return a.get(e,g).then(function(a){var b=a.data,c=b.keeps;return b.before||(d.length=0),d.push.apply(d,c),d})},joinTags:function(a,b){var c=_.reduce(b,function(a,b){return a[b.id]=b,a},{});_.forEach(a,function(a){a.tagList=_.map(a.collections||a.tags,function(a){return c[a]||null})})}};return i}]),angular.module("kifi.keeps",["kifi.profileService","kifi.keepService","kifi.tagService"]).controller("KeepsCtrl",["$scope","profileService","keepService","tagService","$q",function(a,b,c,d,e){a.me=b.me,a.keeps=c.list,a.$watch("keeps",function(){a.refreshScroll()});var f=c.getList();e.all([f,d.fetchAll()]).then(function(){c.joinTags(c.list,d.list)}),a.previewing=null,a.$watch(function(){return c.previewing},function(b){a.previewing=b}),a.selectKeep=function(a){return c.select(a)},a.unselectKeep=function(a){return c.unselect(a)},a.isSelectedKeep=function(a){return c.isSelected(a)},a.toggleSelectKeep=function(a){return c.toggleSelect(a)},a.toggleSelectAll=function(){return c.toggleSelectAll()},a.isSelectedAll=function(){return c.isSelectedAll()},a.isPreviewedKeep=function(a){return c.isPreviewed(a)},a.togglePreviewKeep=function(a){return c.togglePreview(a)}}]).directive("kfKeeps",[function(){return{restrict:"A",scope:{},controller:"KeepsCtrl",templateUrl:"keeps/keeps.tpl.html",link:function(a){function b(b){switch(b){case"m":return a.results.myTotal;case"f":return a.results.friendsTotal;case"a":return a.results.othersTotal}}a.page={title:"Browse your Keeps"},a.results={numShown:0,myTotal:300,friendsTotal:0,othersTotal:12342},a.filter={type:"m"},a.selectedKeep=null,a.checkEnabled=!0,a.getSubtitle=function(){var b=a.subtitle,c=a.results.numShown;switch(b.type){case"query":switch(c){case 0:return"Sorry, no results found for &#x201c;"+(a.results.query||"")+"&#x202c;";case 1:return"1 result found"}return"Top "+c+" results";case"tag":switch(c){case 0:return"No Keeps in this tag";case 1:return"Showing the only Keep in this tag";case 2:return"Showing both Keeps in this tag"}return c===a.results.numTotal?"Showing all "+c+" Keeps in this tag":"Showing the "+c+" latest Keeps in this tag";case"keeps":switch(c){case 0:return"You have no Keeps";case 1:return"Showing your only Keep";case 2:return"Showing both of your Keeps"}return c===a.results.numTotal?"Showing all "+c+" of your Keeps":"Showing your "+c+" latest Keeps"}return b.text},a.setSearching=function(){a.subtitle={text:"Searching..."}},a.setLoading=function(){a.subtitle={text:"Loading..."}},a.isFilterSelected=function(b){return a.filter.type===b},a.isEnabled=function(c){return a.isFilterSelected(c)?!1:!!b(c)},a.getFilterUrl=function(c){if(a.isEnabled(c)){var d=b(c);if(d)return"/find?q="+(a.results.query||"")+"&f="+c+"&maxHits=30"}return""},a.setLoading(),a.preview=function(b,c){"A"!==c.target.tagName&&a.togglePreviewKeep(b)}}}}]),angular.module("kifi.layout.leftCol",[]).controller("LeftColCtrl",["$scope",function(){console.log("left")}]),angular.module("kifi.layout.main",[]).controller("MainCtrl",["$scope",function(a){var b=27;a.search={},a.isEmpty=function(){return!a.search.text},a.onKeydown=function(c){c.keyCode===b&&a.clear()},a.onFocus=function(){a.focus=!0},a.onBlur=function(){a.focus=!1},a.clear=function(){a.search.text=""},a.undoAction={message:"hi"},a.undo=function(){a.undoAction=null}}]),angular.module("kifi.layout.nav",["util"]).directive("kfNav",["$location","util",function(a,b){return{restrict:"A",templateUrl:"layout/nav/nav.tpl.html",link:function(c){c.counts={keepCount:483,friendsNotiConut:18},c.isActive=function(c){var d=a.path();return d===c||b.startsWith(d,c+"/")}}}}]),angular.module("kifi.layout.rightCol",[]).controller("RightColCtrl",["$scope",function(){console.log("right")}]),angular.module("kifi.profileCard",["kifi.profileService"]).directive("kfProfileCard",["profileService",function(a){return{replace:!0,restrict:"A",templateUrl:"profileCard/profileCard.tpl.html",link:function(b){b.me=a.me,a.fetchMe()}}}]),angular.module("kifi.profileService",[]).factory("profileService",["$http","env",function(a,b){function c(a,c,d){return b.picBase+"/users/"+a+"/pics/"+(d||200)+"/"+c}var d={};return{me:d,fetchMe:function(){var e=b.xhrBase+"/user/me";return a.get(e).then(function(a){return angular.forEach(a.data,function(a,b){d[b]=a}),d.picUrl=c(d.id,d.pictureName),d})}}}]),angular.module("kifi.tagService",[]).factory("tagService",["$http","env","$q",function(a,b,c){function d(a){for(var b=0,c=e.length;c>b;b++)if(e[b].id===a)return b;return-1}var e=[],f=null;return{list:e,fetchAll:function(c){if(!c&&f)return f;var d=b.xhrBase+"/collections/all",g={params:{sort:"user",_:Date.now().toString(36)}};return f=a.get(d,g).then(function(a){var b=a.data&&a.data.collections||[];return e.length=0,e.push.apply(e,b),e})},create:function(d){var f=b.xhrBase+"/collections/create";if(b.dev){var g=c.defer(),h={id:d+Date.now()+Math.floor(1e6*Math.random()),name:d,keeps:0};return g.resolve(h),e.unshift(h),g.promise}return a.post(f,{name:d}).then(function(a){var b=a.data;return b.keeps=b.keeps||0,e.unshift(b),b})},remove:function(f){function g(a){var b=d(a);-1!==b&&e.splice(b,1)}if(b.dev){var h=c.defer();return g(f),h.resolve(f),h.promise}var i=b.xhrBase+"/collections/"+f+"/delete";return a.post(i).then(function(){return g(f),f})},rename:function(f,g){function h(a,b){var c=d(a);if(-1!==c){var f=e[c];return f.name=b,f}return null}if(b.dev){var i=c.defer();return i.resolve(h(f,g)),i.promise}var j=b.xhrBase+"/collections/"+f+"/update";return a.post(j,{name:g}).then(function(a){var b=a.data;return h(b.id,b.name)})}}}]),angular.module("kifi.tags",["util","dom","kifi.tagService"]).controller("TagCtrl",["$scope","$timeout","tagService",function(a,b,c){a.create=function(d){return d?c.create(d).then(function(c){return c.isNew=!0,a.clearFilter(),b(function(){delete c.isNew},3e3),c}):void 0},a.rename=function(b){b&&(a.lastHighlight=a.highlight,a.renameTag={value:b.name},a.renaming=b)},a.remove=function(a){return a&&a.id?c.remove(a.id):void 0},a.fetchNext=function(){console.log("hi")}}]).directive("kfTags",["$timeout","$location","util","dom","tagService",function(a,b,c,d,e){var f=38,g=40,h=13,i=27,j=46,k=113;return{restrict:"A",templateUrl:"tags/tags.tpl.html",scope:{},controller:"TagCtrl",link:function(l,m){function n(){l.lastHighlight&&!l.highlight&&(l.highlight=l.lastHighlight),l.lastHighlight=null}function o(){return l.filter&&l.filter.name||""}function p(a){return a?l.getShownTags().indexOf(a):-1}l.tags=e.list,l.clearFilter=function(a){l.filter.name="",a&&(l.focusFilter=!0)},l.isRenaming=function(a){return l.renaming===a},l.onRenameKeydown=function(a){switch(a.keyCode){case h:l.submitRename();break;case i:l.cancelRename()}},l.submitRename=function(){var a=l.renameTag.value,b=l.renaming;return a&&a!==b.name?e.rename(b.id,a).then(function(a){return l.cancelRename(),a}):l.cancelRename()},l.cancelRename=function(){l.renaming=null,l.focusFilter=!0,n()},l.showAddTag=function(){var a=o(),b=!1;return a&&(a=a.toLowerCase(),b=!l.tags.some(function(b){return b.name.toLowerCase()===a})),l.isAddTagShown=b,b},l.isActiveTag=function(a){return c.startsWith(b.path(),"/tag/"+a.id)},l.getShownTags=function(){for(var a=l.$$childHead;a;){if(a.shownTags)return a.shownTags;a=a.$$nextSibling}return l.tags||[]},l.viewTag=function(a){return a?b.path("/tag/"+a.id):void 0},l.select=function(){return l.highlight?l.viewTag(l.highlight):l.create(o())},l.onKeydown=function(a){switch(a.keyCode){case f:l.highlightPrev();break;case g:l.highlightNext();break;case h:l.select();break;case i:l.highlight?l.dehighlight():l.clearFilter();break;case j:l.remove(l.highlight);break;case k:l.rename(l.highlight)}},l.refreshHighlight=function(){var a=l.getShownTags(),b=l.highlight;if(b){var c=a.indexOf(b);if(-1!==c)return l.highlightAt(c)}return o()&&a.length?l.highlightFirst():l.dehighlight()},l.isHighlight=function(a){return l.highlight===a},l.isHighlightNew=function(){return!l.highlight&&!!o()},l.dehighlight=function(){return l.highlight=null,l.isAddTagShown&&d.scrollIntoViewLazy(m.find(".kf-tag-new")[0]),null},l.highlightAt=function(a){if(null==a)return l.dehighlight();var b=l.getShownTags(),c=b.length;if(!c)return l.dehighlight();a=(a%c+c)%c;var e=b[a];return l.highlight=e,d.scrollIntoViewLazy(m.find(".kf-tag")[a]),e},l.highlightFirst=function(){return l.highlightAt(0)},l.highlightLast=function(){return l.highlightAt(-1)},l.highlightNext=function(){if(l.isHighlightNew())return l.highlightFirst();var a=p(l.highlight);return-1===a?l.highlightFirst():a===l.getShownTags().length-1?l.isAddTagShown?l.dehighlight():l.highlightFirst():l.highlightAt(a+1)},l.highlightPrev=function(){if(l.isHighlightNew())return l.highlightLast();var a=p(l.highlight);return-1===a?l.highlightLast():0===a?l.isAddTagShown?l.dehighlight():l.highlightLast():l.highlightAt(a-1)};var q=m.find(".kf-tag-list");q.css({position:"absolute",top:q.position().top,bottom:0}),l.$watch("filter.name",function(){a(l.refreshHighlight),l.refreshScroll()}),l.$watch("tags",function(){l.refreshScroll()}),e.fetchAll()}}}]),angular.module("kifi.templates",["detail/detail.tpl.html","detail/keepDetail.tpl.html","keep/keep.tpl.html","keeps/keeps.tpl.html","layout/footer/footer.tpl.html","layout/leftCol/leftCol.tpl.html","layout/main/main.tpl.html","layout/nav/nav.tpl.html","layout/rightCol/rightCol.tpl.html","profileCard/profileCard.tpl.html","tags/tags.tpl.html"]),angular.module("detail/detail.tpl.html",[]).run(["$templateCache",function(a){a.put("detail/detail.tpl.html",'<div class="kf-detail-pane" ng-show="getPreviewed()"><div class="kf-detail-scroll" antiscroll="{ autoHide: false }"><div class="kf-detail-inner {{howKept}}"><a class="kf-detail-x" href="javascript:"></a><div class="kf-page-meta" data-n="{{getLength()}}"><h2 class="kf-detail-header page-title" ng-bind="getTitleText()"></h2><div kf-keep-detail="" ng-show="showSingleKeep()"></div><a class="kf-page-keep" href="javascript:"></a> <a class="kf-page-priv" href="javascript:"></a></div><div ng-show="showSingleKeep()"><div class="kf-page-who"><h2 class="kf-detail-header">Who kept this:</h2><div class="kf-page-who-pics"></div><div class="kf-page-who-text"></div></div><div class="kf-page-chatter"><h2 class="kf-detail-header">Talking about this Keep:</h2><a class="kf-page-chatter-messages" href="{{url}}" target="_blank" data-n="0" data-locator="/messages">Private Conversation</a></div></div><div class="page-colls" ng-class="{ some: collections.length }"><h2 class="kf-detail-header">Tags:</h2><ul class="page-coll-list"><li class="page-coll" data-template="" data-id="{{id}}"><a class="page-coll-a long-text" href="tag/{{id}}">{{name}}</a> <a class="page-coll-x" href="javascript:"></a></li><li class="page-coll-new" data-after-template=""><a class="page-coll-add" href="javascript:"></a> <span class="page-coll-sizer" style="display:none"></span><input class="page-coll-input" style="display:none" type="text" placeholder="tag name"><ul class="page-coll-opts" style="display:none"><li class="page-coll-opt long-text" data-template="" data-id="{{id}}">{{name}}</li></ul></li></ul></div></div></div></div>')}]),angular.module("detail/keepDetail.tpl.html",[]).run(["$templateCache",function(a){a.put("detail/keepDetail.tpl.html",'<div class="kf-keep-detail"><a class="kf-keep-detail-url long-text" ng-href="{{keep.url}}" target="_blank">{{keep.url}}</a><div class="kf-page-pic-wrap"><div class="kf-page-pic-special"></div><a class="kf-page-pic" ng-href="{{keep.url}}" target="_blank"><div class="kf-page-pic-1"><div class="kf-page-pic-2"><div class="kf-page-pic-3"><div class="kf-page-pic-soon">Preview of this page<br>not yet available</div><span class="kf-page-pic-tip">Visit page</span></div></div></div></a><div class="kf-page-how {{keep.howKept}}"><div class="kf-page-how-0"><div class="kf-page-how-pub"><div class="kf-page-how-1"><div class="kf-page-how-2"><div class="kf-page-how-3">Public</div></div></div></div><div class="kf-page-how-pri"><div class="kf-page-how-1"><div class="kf-page-how-2"><div class="kf-page-how-3">Private</div></div></div></div></div></div></div></div>')}]),angular.module("keep/keep.tpl.html",[]).run(["$templateCache",function(a){a.put("keep/keep.tpl.html",'<li class="kf-keep" ng-class="{ mine: isMine(), example: isExample(), private: isPrivate(), detailed: isPreviewed(), selected: isSelected() }"><time class="kf-keep-time" ng-attr-datetime="{{keep.createdAt}}" ng-show="keep.createdAt" am-time-ago="keep.createdAt"></time><div class="kf-keep-handle"><div class="kf-keep-checkbox" ng-click="onCheck($event)"></div></div><div class="kf-keep-title"><span class="kf-example-tag">Example keep</span> <a class="kf-keep-title-link" ng-href="{{keep.url}}" target="_blank" ng-attr-title="{{getTitle()}}" ng-bind-html="keep.titleHtml"></a></div><div class="kf-keep-url" ng-attr-title="{{keep.url}}" ng-bind-html="keep.descHtml"></div><div class="kf-keep-tags"><span class="kf-keep-tag" ng-class="{ example: isExampleTag(tag) }" ng-repeat="tag in getTags()"><a class="kf-keep-tag-link" ng-href="/tag/{{tag.id}}">{{tag.name}}</a></span></div><div class="kf-keep-who"><a class="kf-keep-who-pic me" title="You! You look great!" ng-attr-style="background-image: url({{getPicUrl(me)}})"></a> <a class="kf-keep-who-pic" href="javascript:" data-id="{{id}}" data-name="{{getName(keeper)}}" ng-attr-style="background-image: url({{getPicUrl(keeper)}})" ng-repeat="keeper in keep.keepers | limitTo: 9"></a> <span class="kf-keep-who-others" ng-if="showOthers()"></span> <span class="kf-keep-who-text"><span class="kf-keep-you">You <span class="kf-keep-private" ng-class="{ on: isPrivate() }" ng-if="hasKeepers()">Private</span></span> <span class="kf-keep-friends" ng-if="hasKeepers()">{{getFriendText()}}</span> <span class="kf-keep-others" ng-if="hasOthers()">{{getOthersText()}}</span> <span class="kf-keep-kept-this">kept this</span> <span class="kf-keep-private" ng-class="{ on: isPrivate() }" ng-if="isOnlyMine()">Private</span></span></div><div class="kf-keep-arrow-1"><div class="kf-keep-arrow-2"><div class="kf-keep-arrow-3"><div class="kf-keep-arrow-4"></div></div></div></div><div class="kf-keep-hover-button-wrapper"><div class="kf-keep-hover-button-table"><div class="kf-keep-hover-button-cell"><div class="kf-keep-hover-button"><span class="kf-keep-button-preview">Preview</span> <span class="kf-keep-button-close">Close</span></div></div></div></div></li>')}]),angular.module("keeps/keeps.tpl.html",[]).run(["$templateCache",function(a){a.put("keeps/keeps.tpl.html",'<div><div class="kf-main-head"><h1 class="kf-main-title">{{page.title}}</h1><div class="kf-subtitle"><span class="kf-check-all" ng-class="{ enabled: checkEnabled, checked: isSelectedAll() }" ng-click="toggleSelectAll()"></span> <span class="kf-subtitle-text">{{getSubtitle()}}</span> <span class="kf-search-filters" ng-if="subtitle.type === \'query\' || true"><a class="kf-search-filter" ng-class="{ selected: isFilterSelected(\'m\'), enabled: isEnabled(\'m\') }" ng-href="{{getFilterUrl(\'m\')}}">You ({{results.myTotal}})</a> <a class="kf-search-filter" ng-class="{ selected: isFilterSelected(\'f\'), enabled: isEnabled(\'f\') }" ng-href="{{getFilterUrl(\'f\')}}">Friends ({{results.friendsTotal}})</a> <a class="kf-search-filter" ng-class="{ selected: isFilterSelected(\'a\'), enabled: isEnabled(\'a\') }" ng-href="{{getFilterUrl(\'a\')}}">All ({{results.myTotal + results.friendsTotal + results.othersTotal}})</a></span></div></div><div class="kf-main-keeps" antiscroll="{ autoHide: false }"><ol id="kf-search-results"></ol><ol id="kf-my-keeps"><div kf-keep="" ng-repeat="keep in keeps" ng-click="preview(keep, $event)"></div></ol><div class="kf-keep-group-title-fixed"></div><img class="kf-keeps-loading" src="/assets/img/wait.gif"> <a class="kf-keeps-load-more hidden" href="javascript:">Show more</a></div></div>')}]),angular.module("layout/footer/footer.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/footer/footer.tpl.html",'<div class="kf-footer" antiscroll="{ autoHide: false }"><h2 class="kf-footer-header">Getting Started with kifi</h2><ul class="kf-footer-list about-kifi"><li><a class="kf-footer-item-link kifi-tutorial" href="#"><span class="kf-footer-item-icon kf-footer-item-icon-tutorial"></span> Quick guide to get started</a></li><li class="install-kifi"><a class="kf-footer-item-link" href="/install"><span class="kf-footer-item-icon kf-footer-item-icon-install"></span> Install the extension</a></li><li><a class="kf-footer-item-link" href="friends/invite"><span class="kf-footer-item-icon kf-footer-item-icon-friends"></span> Find friends</a></li></ul><h2 class="kf-footer-header">kifi Support and Updates</h2><ul class="kf-footer-list about-us"><li><a class="kf-footer-item-link support-center" href="http://support.kifi.com"><span class="kf-footer-item-icon kf-footer-item-icon-support"></span> Support center</a></li><li><a class="kf-footer-item-link contact-us" href="http://support.kifi.com/customer/portal/emails/new"><span class="kf-footer-item-icon kf-footer-item-icon-contact"></span> Contact us</a></li><li><a class="kf-footer-item-link updates-features" href="http://blog.kifi.com"><span class="kf-footer-item-icon kf-footer-item-icon-blog"></span> kifi blog</a></li></ul><div class="kf-footer-more"><a href="/privacy">Privacy</a> <span class="kf-footer-sep">|</span> <a href="/terms">Terms</a> <span class="kf-footer-sep">|</span> <a href="/about">About kifi</a> <span class="kf-footer-sep">|</span> <a href="http://www.42go.com">About FortyTwo</a></div></div>')}]),angular.module("layout/leftCol/leftCol.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/leftCol/leftCol.tpl.html",'<div class="kf-col-inner" ng-controller="LeftColCtrl"><div class="kf-header-left"><a class="kf-header-logo" href="/"></a></div><div kf-profile-card=""></div><div kf-nav=""></div><div kf-tags=""></div></div>')}]),angular.module("layout/main/main.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/main/main.tpl.html",'<div class="kf-col-inner" ng-controller="MainCtrl"><div class="kf-query-wrap" ng-class="{ empty: isEmpty(), focus: focus }"><input class="kf-query" type="text" placeholder="Find anything..." ng-model="search.text" ng-keydown="onKeydown($event)" ng-focus="onFocus()" ng-blur="onBlur()"><span class="kf-query-icon"><b class="kf-query-mag"></b> <a class="kf-query-x" href="javascript:" ng-click="clear()"></a></span><div class="kf-undo" ng-if="undoAction"><span class="kf-undo-box"><span class="kf-undo-message">{{undoAction.message}}</span> <a class="kf-undo-link" href="javascript:" ng-click="undo()">Undo</a> <span></span></span></div></div><div kf-keeps=""></div></div>')}]),angular.module("layout/nav/nav.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/nav/nav.tpl.html",'<div class="kf-nav-group-name">You</div><ul class="kf-nav-group"><li class="kf-nav-item kf-nav-keeps" ng-class="{ active: isActive(\'/\') }"><a class="kf-nav-link" href="/"><span class="kf-nav-name">Your Keeps</span> <span class="kf-nav-count" ng-class="{ empty: !counts.keepCount }">{{counts.keepCount}}</span></a></li><li class="kf-nav-item kf-nav-friends" ng-class="{ active: isActive(\'/friends\') }"><a class="kf-nav-link" href="/friends"><span class="kf-nav-name">Your Friends</span> <span class="kf-nav-count" ng-class="{ empty: !counts.friendsNotiConut }">{{counts.friendsNotiConut}}</span></a></li></ul>')}]),angular.module("layout/rightCol/rightCol.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/rightCol/rightCol.tpl.html",'<div class="kf-col-inner" ng-controller="RightColCtrl"><nav class="kf-top-right-nav"><a href="/logout">Log out</a></nav><div ng-include="\'layout/footer/footer.tpl.html\'"></div><div kf-detail=""></div></div>')}]),angular.module("profileCard/profileCard.tpl.html",[]).run(["$templateCache",function(a){a.put("profileCard/profileCard.tpl.html",'<div class="kf-my-identity"><a class="kf-my-settings-wrapper" href="/profile"><span class="kf-my-pic" style="background-image: url({{me.picUrl}})"></span> <span class="kf-my-settings-shade"></span> <span class="kf-my-settings"><span class="kf-my-settings-icon"></span> <span class="kf-my-settings-text">Settings</span></span></a><div class="kf-my-name">{{me.firstName}} {{me.lastName}}</div><div class="kf-my-description">{{me.description}}</div></div>')}]),angular.module("tags/tags.tpl.html",[]).run(["$templateCache",function(a){a.put("tags/tags.tpl.html",'<div class="kf-tags"><div class="kf-nav-group-name">Tags</div><label class="kf-nav-item kf-tag-input-box"><input name="filterName" placeholder="Find or add a tag..." ng-model="filter.name" focus-when="focusFilter" ng-keydown="onKeydown($event)" ng-blur="dehighlight()"><a class="kf-tag-input-clear" href="javascript:" ng-click="clearFilter(true)" ng-show="filter.name">&times;</a></label></div><ul class="kf-tag-list" antiscroll="{ autoHide: false }" anti-infinite-scroll="fetchNext()"><li class="kf-nav-item kf-tag" ng-class="{ active: isActiveTag(tag), highlight: isHighlight(tag), new: tag.isNew, renaming: isRenaming(tag) }" ng-repeat="tag in shownTags = (tags | filter: filter)"><a class="kf-nav-link" ng-href="/tag/{{tag.id}}"><span class="kf-tag-icon"></span> <span class="kf-tag-name">{{tag.name}}</span> <span class="kf-tag-count">{{tag.keeps}}</span></a><input class="kf-tag-rename" type="text" placeholder="Type new tag name" ng-model="renameTag.value" ng-keydown="onRenameKeydown($event)" ng-if="isRenaming(tag)" autofocus><div class="dropdown"><a class="dropdown-toggle"></a><ul class="dropdown-menu"><li><a href="javascript:" ng-click="rename(tag)">Rename</a></li><li><a href="javascript:" ng-click="remove(tag)">Remove</a></li></ul></div></li><li class="kf-nav-item kf-tag kf-tag-new" ng-class="{ highlight: isHighlightNew() }" ng-show="showAddTag()"><a href="javascript:" ng-click="create(filter.name)"><span class="kf-tag-icon kf-tag-icon-create"></span> <span class="kf-tag-caption">Add a new tag:</span> <span class="kf-tag-name">{{filter.name}}</span></a></li></ul>')}]);