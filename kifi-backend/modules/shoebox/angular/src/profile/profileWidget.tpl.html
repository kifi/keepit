<div class="kf-pw">

  <div class="kf-pw-badge">
    <a href="{{me|profileUrl}}" ng-click="registerEvent('Photo')" class="kf-pw-profileImg">
      <img ng-src="{{me|pic:100}}" />
    </a>
    <aside>
      <h1>
        <a href="{{me|profileUrl}}" ng-click="registerEvent('Name')">
          {{me.firstName}} {{me.lastName}}
        </a>
      </h1>
      <p>
        <a
          ng-class="me.biography ? '' : 'no-bio'"
          ng-click="bioClick()"
          kf-ellipsis
          full-text="me.biography || 'Add a Bio'"
          max-num-lines="2">
        </a>
      </p>
    </aside>
  </div>

  <div class="stats">
    <a href="{{me|profileUrl}}" ng-click="registerEvent('Libraries')" class="stat">
      <h2>Libraries</h2>
      <h3>{{me.numLibraries}}</h3>
    </a>
    <a href="{{me|profileUrl:'connections'}}" ng-click="registerEvent('Connections')" class="stat">
      <h2>Connections</h2>
      <h3>
        {{me.numConnections}}
        <span ng-if="me.pendingFriendRequests > 0" >+{{me.pendingFriendRequests}}</span>
      </h3>
    </a>
    <a href="{{me|profileUrl:'followers'}}" ng-click="registerEvent('Followers')" class="stat">
      <h2>Followers</h2>
      <h3>{{me.numFollowers}}</h3>
    </a>
  </div>

  <div class="kf-pw-orgs" ng-if="organizations">
    <div ng-repeat="org in organizations" ng-if="org.pending == null || org.notDeclined" class="kf-pw-org" ng-class="{ 'kf-pw-org-pending': org.pending }" >
      <p ng-if="org.pending" class="kf-pw-org-pending-label">You've been invited to join this team</p>
      <a class="kf-pw-org-link" href="{{org.handle}}" ng-click="registerEvent('clickedOrgFromProfile')">
        <img class="kf-pw-org-img" ng-src="{{ org | pic:200 }}" />
      </a>
      <div class="kf-pw-org-bio">
        <h1>
          <a
            class="kf-pw-org-link"
            ng-href="{{org.handle}}"
            ng-click="registerEvent('clickedOrgFromProfile')"
          >{{ org.name }}</a>
        </h1>
        <table class="stats">
          <tr class="stats-row">
            <td>
              <a href="{{ org | profileUrl }}" class="stat-number" ng-click="registerEvent('clickedOrgLibrariesProfileWidget')">
                {{org.numLibraries}}
              </a>
            </td>
            <td>
              <a href="{{ org | profileUrl }}" class="stat-title" ng-click="registerEvent('clickedOrgLibrariesProfileWidget')"
                 ng-pluralize count="org.numLibraries" when="{'1':'Library', 'other':'Libraries'}">
              </a>
            </td>
          </tr>
          <tr class="stats-row">
            <td>
              <a href="{{ org | profileUrl:'members' }}" class="stat-number" ng-click="registerEvent('clickedOrgMembersProfileWidget')">
                {{org.numMembers}}
              </a>
            </td>
            <td>
              <a href="{{ org | profileUrl:'members' }}" class="stat-title" ng-click="registerEvent('clickedOrgMembersProfileWidget')"
                 ng-pluralize count="org.numMembers" when="{'1':'Member', 'other':'Members'}">
              </a>
            </td>
          </tr>
        </table>
      </div>
      <button class="org-inv-btn org-inv-btn-accept" ng-if="org.pending && org.notDeclined" ng-click="acceptInvite(org)">Accept</button>
      <button class="org-inv-btn org-inv-btn-decline" ng-if="org.pending && org.notDeclined" ng-click="declineInvite(org)">Decline</button>
    </div>
  </div>
  <div ng-if="::shouldShowCreateTeam()" class="kf-pw-create-org kf-link-parent" ng-click="createTeam()">
    <span class="svg-create-library kf-pw-create-org-icon"></span>
    <button class="kf-pw-create-org-label kf-link"><h1 class="kf-link">Create a team</h1></button>
  </div>
</div>
