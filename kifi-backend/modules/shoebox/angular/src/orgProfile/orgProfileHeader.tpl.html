<div class="kf-oph">
  <div
    ng-if="shouldShowInviteBanner()"
    kf-generic-banner
    text="You've been invited to join {{profile.name}}'s team."
    actions="inviteBannerButtons"
  ></div>
  <div
    ng-if="shouldShowSignupBanner()"
    kf-generic-banner
    thumb="{{membership.invite.inviter|pic}}"
    text="{{membership.invite.inviter|name}} invited you to become a member of this team."
    actions="signupBannerButtons"
  ></div>
  <div class="kf-oph-wrapper">
    <div class="kf-oph-top">
      <div kf-profile-image readonly="readonly" profile="profile" upload-url="{{'/organizations/' + profile.id + '/avatar/upload'}}" pic-url="profile | pic:200"></div>
      <div class="kf-oph-about">
        <div class="kf-oph-about-info">
          <div class="kf-oph-name" kf-click-to-edit on-save="save" value="profile.name" class-name="'kf-oph-input'" readonly="readonly"></div>
          <div
            class="kf-oph-description"
            kf-click-to-edit
            on-save="save"
            class-name="'kf-oph-input'"
            input-placeholder="'Description'"
            value="profile.description"
            readonly="readonly"
            ng-if="!(readonly && !profile.description.length)"
          ></div><div ng-if="isAdmin"><a class="kf-oph-admin-link" ng-href="https://admin.kifi.com/admin/organization/{{profile.id}}">â™¡</a></div>
          <p class="kf-oph-url">
            <span kf-click-to-edit on-save="save" readonly="readonly" class-name="'kf-oph-input'" input-placeholder="'Link (e.g. http://example.com)'" linkable="true" value="profile.site"></span>
          </p>
          <div class="kf-oph-upper-right">
            <a ng-if="canInvite" class="kf-link kf-oph-invite-button" ng-click="goToMemberInvite()">
              <svg
                kf-symbol-sprite
                icon="add-member"
              ></svg>
              <span>Invite new member</span>
            </a>
            <span
              ng-if="membership.role === 'admin'"
              kf-upsell
              position="bottom"
              on-click="onClickUpsellInvite()"
              on-hover="onHoverUpsellInvite()"
              class="kf-oph-upsell-invite"
            >
              <span ng-if="plan.name.toLowerCase().indexOf('paid') === -1">
                Restrict who can invite new members by <a class="kf-link" href="#">Upgrading to Premium</a>.
              </span>
              <span ng-if="plan.name.toLowerCase().indexOf('paid') !== -1">
                <span ng-if="membership.role === 'admin' && plan.settings.invite_members.setting === ORG_SETTING_VALUE.MEMBER">
                  All team members are able to invite. Edit this in <a class="kf-link" ui-sref="orgProfile.settings({ handle: profile.handle })">settings</a>
                </span>
                <span ng-if="membership.role === 'admin' && plan.settings.invite_members.setting === ORG_SETTING_VALUE.ADMIN">
                  Only admins are able to invite. Edit this in <a class="kf-link" ui-sref="orgProfile.settings({ handle: profile.handle })">settings</a>
                </span>
              </span>
            </span>
          </div>
        </div>
        <nav class="kf-oph-stats">
          <a
            class="kf-oph-stats-a kf-button-textonly"
            ui-sref="orgProfile.libraries"
            ng-click="onClickTrack($event, 'clickedProfileLibraries')"
            ng-class="{ 'active': state.current.activetab === 'libraries' }"
          >
            <div class="kf-oph-stats-count">{{profile.numLibraries|num}}</div>
            <div class="kf-oph-stats-name">Libraries</div>
          </a>
          <a
            ng-if="plan.settings.membership.view_members.setting === ORG_SETTING_VALUE.ANYONE || membership.permissions.indexOf(ORG_PERMISSION.VIEW_MEMBERS) !== -1"
            class="kf-oph-stats-a kf-button-textonly"
            ng-href="{{ '/' + profile.handle + '/members' }}"
            ng-click="onClickTrack($event, 'clickedProfileMembers')"
            ng-class="{ 'active': state.current.activetab === 'members' }"
          >
            <div class="kf-oph-stats-count">{{profile.numMembers|num}}</div>
            <div class="kf-oph-stats-name">Members</div>
            <span
              ng-if="membership.role === 'admin'"
              kf-upsell
              on-click="onClickUpsellMembers()"
              on-hover="onHoverUpsellMembers()"
              class="kf-oph-upsell-members"
            >
              <span ng-if="plan.name.toLowerCase().indexOf('paid') === -1">
                Restrict who can view your team's members by <button class="kf-link" target="_self" href="https://www.kifi.com/teams">Upgrading to Premium</button>.
              </span>
              <span ng-if="plan.name.toLowerCase().indexOf('paid') !== -1">
                <span ng-if="membership.role === 'admin' && plan.settings.view_members.setting === ORG_SETTING_VALUE.ANYONE">
                  Your members page is publicly viewable.<br />Edit this in <button class="kf-link" ui-sref="orgProfile.settings({ handle: profile.handle })">settings</button>
                </span>
                <span ng-if="membership.role === 'admin' && plan.settings.view_members.setting === ORG_SETTING_VALUE.MEMBER">
                  Only members of {{ profile.name }} can view your team's member list.<br />Edit this in <button class="kf-link" ui-sref="orgProfile.settings({ handle: profile.handle })">settings</button>
                </span>
              </span>
            </span>
          </a>
          <a
            class="kf-oph-stats-a kf-button-textonly"
            ui-sref="orgProfile.settings"
            ng-click="onClickTrack($event, 'clickedProfileSettings')"
            ng-class="{ 'active': state.current.activetab ==='settings'}"
            ng-if="!readonly && isAdmin"
          >
            <div class="kf-oph-stats-name">Settings</div>
          </a>
        </nav>
        </table>
      </div>
    </div>
  </div>
</div>
