<div class="kf-lih" ng-controller="LoggedInHeaderCtrl">
  <div class="kf-lih-inner">
    <div class="kf-lih-left">
      <button class="kf-lih-toggle-menu" ng-class="{'kf-lih-toggle-menu-visible': libraryMenu.visible}" ng-click="toggleMenu()"><span class="sprite sprite-burger"></span></button>
      <div class="kf-lih-left-separator"></div>
      <a class="kf-lih-logo svg-kifi-clover-white-text" ui-sref="home"></a>
    </div>
    <div class="kf-lih-center">
      <label class="kf-lih-search" ng-class="{'kf-lit': isFocused || search.text}">
        <span class="kf-lih-search-left">
          <span class="kf-lih-search-icon"></span>
          <a class="kf-lih-search-lib-owner-img" ng-if="search.showName" style="background-image:url({{library.owner.picUrl || 'https://www.kifi.com/assets/img/ghost.100.png'}})" href="{{library.owner.profileUrl}}" title="{{library.owner.firstName}} {{library.owner.lastName}}"></a>
          <span class="kf-lih-search-lib-name" ng-if="search.showName" style="background-color:{{library.color}}">{{library.name}}</span>
          <a class="kf-lih-search-lib-x" ng-if="search.showName" style="background-color:{{library.color}}" ng-click="clearLibraryName()" href="javascript:">&times;</a>
        </span>
        <span class="kf-lih-search-center">
          <input class="kf-lih-search-input" type="text" placeholder="Search Kifiâ€¦" ng-model="search.text" ng-focus="focusInput()" ng-blur="blurInput()" ng-change="changeSearchInput()" ng-keydown="onKeydown($event)" ng-click="onSearchBarClicked()">
        </span>
        <span class="kf-lih-search-right" ng-if="search.text">
          <button class="kf-lih-search-clear" ng-click="clearInput()">Clear</button>
        </span>
      </label>
    </div>
    <div class="kf-lih-right">
      <button class="kf-lih-add-link sprite sprite-add-link" ng-click="addKeeps(library)">Add a link</button>
      <div kf-callout class="kf-callout-bubble-bottom kf-callout-tags" ng-if="showCallout()">
        <div>Your tags are safe. Creating a new library from a tag is a snap.</div>
        <div class="kf-callout-bubble-action">
          <div class="kf-callout-bubble-button" ng-click="closeCallout()">Got it</div>
        </div>
      </div>
      <a href="/tags/manage" class="kf-lih-manage-tags sprite svg-tag-black" ng-class="{'svg-tag-hover': hover, 'kf-callout-tags-button': showCallout()}" ng-mouseenter="hover = true" ng-mouseleave="hover = false">Manage your tags</a>
      <span class="kf-lih-dropdown-parent">
        <a href="/friends" class="kf-lih-friends sprite sprite-friends">Friends</a>
        <menu class="kf-dropdown-menu">
          <a href="/friends">Your Kifi Friends</a>
          <a href="/invite">Invite a friend to Kifi</a>
        </menu>
      </span>
      <span class="kf-lih-dropdown-parent">
        <a href="{{userProfileUrl}}" class="kf-lih-profile" style="background-image:url({{me.picUrl}})"></a>
        <menu class="kf-dropdown-menu">
          <a href="{{userProfileUrl}}">Your Profile</a>
          <a href="/profile">Settings</a>
          <a href="{{logoutUrl}}" target="_top">Log out</a>
        </menu>
      </span>
    </div>
  </div>
</div>
