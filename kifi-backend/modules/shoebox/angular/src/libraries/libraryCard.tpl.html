<div class="kf-library-card-header-wrapper">
  <div class="kf-library-card-header">
    <div class="kf-keep library-card">
      <div ng-show="library.invite && !library.invite.actedOn" class="library-card-invite-header">
        <button class="library-card-invite-header-button library-card-invite-header-accept" ng-click="acceptInvitation()">Accept</button>
        <button class="library-card-invite-header-button library-card-invite-header-ignore" ng-click="ignoreInvitation()">Ignore</button>
        <span class="library-card-invite-header-info">{{library.invite.inviterName}} has invited you to follow this library</span>
      </div>
      <div class="kf-keep-lib-body">
        <div class="kf-keep-lib-header">
          <div class="kf-keep-lib-name-container kf-keep-title">
            <a class="kf-keep-lib-name" href="{{library.url}}" ng-click="clickLibraryCallback()">{{library.name}}</a>
          </div>
        </div>
        <div class="kf-keep-lib-color" ng-class="{'kf-above-image': coverImageUrl}" style="background-color:{{library.color}}"></div>
        <a ng-if="coverImageUrl" href="{{library.url}}" class="kf-keep-lib-cover-image"
          style="background-image:url({{coverImageUrl}});background-position:{{library.image.x}}% {{library.image.y}}%"></a>
        <div class="kf-keep-lib-info">
          <div class="kf-keep-lib-owner">
            <a href="{{library.owner.profileUrl}}" kf-track-origin origin="recommendationsPage/curator">
              <img src="{{library.owner.picUrl || 'https://www.kifi.com/assets/img/ghost.200.png'}}"
                class="kf-keep-lib-user-image" alt="{{library.owner.firstName}} {{library.owner.lastName}}">
            </a>
            <div class="kf-keep-lib-owner-text">
              <div class="kf-keep-lib-curator">Curator:</div>
              <div class="kf-keep-lib-owner-name">{{library.owner.firstName}} {{library.owner.lastName}}</div>
            </div>
          </div>
          <div ng-switch="clippedDescription" class="kf-keep-lib-description-container">
            <p ng-switch-when="true" class="kf-keep-lib-description">
              <span ng-bind-html="library.shortDescription" itemtype="description"></span>&hellip;
              <a href="javascript:" class="kf-desc-more" ng-click="showLongDescription()">More</a>
            </p>
            <p ng-switch-when="false" class="kf-keep-lib-description" ng-bind-html="library.formattedDescription"></p>
          </div>
          <div class="kf-keep-lib-stats-and-followers">
            <div class="kf-keep-lib-metrics">
              <div class="kf-keep-lib-keeps-followers-stats">
                <span class="kf-keep-lib-stats-heading">Keeps</span>
                <span class="kf-keep-lib-stats-number">{{library.numKeeps}}</span>
              </div>

              <div class="kf-keep-lib-keeps-followers-stats kf-keep-lib-followers-stats" ng-click="showFollowers()">
                <span class="kf-keep-lib-stats-heading">Followers</span>
                <span class="kf-keep-lib-stats-number">{{library.numFollowers}}</span>
              </div>
            </div>

            <div kf-library-follower-pics num-followers="library.numFollowers" followers="library.followers"
              show-followers="showFollowers()" current-page-origin="recommendationsPage"></div>
          </div>
        </div>
      </div>
      <div class="kf-keep-footer clearfix">
        <button ng-if="!alreadyFollowingLibrary()" ng-click="followLibrary()" class="kf-keep-lib-footer-button kf-keep-lib-footer-button-right kf-keep-lib-footer-button-follow-unfollow kf-keep-lib-footer-button-follow kf-keep-lib-footer-sticky-follow-button">
          Follow Library
        </button>
        <button ng-if="alreadyFollowingLibrary()" class="kf-keep-lib-footer-button kf-keep-lib-footer-button-right kf-keep-lib-footer-button-follow-unfollow kf-keep-lib-footer-button-unfollow" ng-click="unfollowLibrary()"></button>
        <div kf-library-share-search library="library" current-page-origin="libraryPage" class="kf-keep-lib-footer-button-right"></div>

        <button class="kf-keep-lib-footer-button library-button-with-icon kf-keep-lib-footer-twitter-button">
          <a class="kf-keep-lib-footer-share-link" href="https://twitter.com/intent/tweet?original_referer={{library.shareUrl}}&text={{library.shareText}}&tw_p=tweetbutton&url={{library.shareTwitterUrl}}" ng-click="shareTwitter()">
            <span class="kf-keep-lib-footer-button-icon svg-twitter"></span>
            <span class="kf-keep-lib-footer-button-icon svg-twitter-white"></span><!-- for non-logged-in users -->
            <span class="kf-keep-lib-footer-share-link-text">Tweet</span>
          </a>
        </button>
        <button ng-click="shareFB()" class="kf-keep-lib-footer-button library-button-with-icon kf-keep-lib-footer-facebook-button">
          <span class="kf-keep-lib-footer-button-icon svg-facebook"></span>
          <span class="kf-keep-lib-footer-button-icon svg-facebook-white"></span><!-- for non-logged-in users -->
          <a class="kf-keep-lib-footer-share-link-text" href="javascript:">Post</a>
        </button>
      </div>
    </div>
  </div>
</div>
