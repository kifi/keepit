<div class="manage-library dialog-content">
  <a class="dialog-x manage-library-close-x" ng-click="close()"></a>

  <div class="dialog-body-wrap">
    <h1 class="dialog-header">{{modalTitle}}</h1>
    <div class="dialog-body">
      <div class="dialog-text">

        <div class="manage-lib-input-wrapper">
          <div class="manage-lib-input-title">
            <span class="manage-lib-heading">Name</span>
            <span class="manage-lib-error manage-lib-name-error" ng-if="$error.name">{{$error.name}}</span>
          </div>
          <input class="manage-lib-input manage-lib-name-input ng-pristine ng-valid" ng-model="library.name" type="text" name="name" placeholder="Type a name for your library..." autocomplete="off" novalidate>
          <span class="manage-lib-slug">kifi.com/{{username}}/
            <input ng-change="editSlug()" class="manage-lib-slug-input ng-pristine ng-valid" ng-model="library.slug" ng-class="{ 'slug-edited': userHasEditedSlug }" type="text" name="slug" placeholder="new-library" novalidate>
          </span>
        </div>

        <div class="manage-lib-input-wrapper">
          <span class="manage-lib-heading manage-lib-input-title manage-lib-description-title-input">Description<span class="manage-lib-error" ng-if="$error.description">{{$error.description}}</span></span><!-- for removing space between inline-block --><textarea
          class="manage-lib-input manage-lib-description-input ng-pristine ng-valid" ng-model="library.description" name="description" placeholder="Add a description..." novalidate>
        </div>

        <div class="manage-lib-input-wrapper">
          <div class="manage-lib-heading">Who can see this library?</div>
            <div class="manage-lib-visibility">
              <div class="manage-lib-create-visibility-input-container">
                <span kf-library-visibility-checkbox library="library"></span>
              </div>

              <div ng-switch="library.visibility" class="manage-lib-visibility-description">
                <div ng-switch-default class="manage-lib-visibility-description-content">It's public. Everyone in the world can see and follow this public library.</div>
                <div ng-switch-when="secret" class="manage-lib-visibility-description-content">Make it private. Only you and the people you invite to your private library can see its content.</div>
              </div>

              <div ng-switch="library.visibility" class="manage-lib-choice-card">
                <div ng-switch-default class="manage-lib-choice-card-img svg-public-library-icon"></div>
                <div ng-switch-when="secret" class="manage-lib-choice-card-img svg-private-library-icon"></div>
              </div>
            </div>
        </div>

        <div ng-if="$error.general" class="manage-lib-input-wrapper manage-lib-error">{{$error.general}}</div>

        <div ng-if="modifyingExistingLibrary" class="manage-lib-heading">Invite followers</div>
        <div ng-if="modifyingExistingLibrary" kf-library-share-search library="library" manage-lib-invite="true" class="manage-lib-invite"></div>

        <ul ng-if="modifyingExistingLibrary" class="manage-lib-followers">
          <li class="manage-lib-follower manage-lib-owner">
            <img ng-src="{{library.owner.picUrl || 'https://www.kifi.com/assets/img/ghost.200.png'}}" class="manage-lib-follower-image">
            <div class="manage-lib-follower-name">{{library.owner.firstName}} {{library.owner.lastName}}</div>
            <div class="manage-lib-follower-status">Owner</div>
          </li>

          <li class="manage-lib-follower" ng-repeat="follower in library.followers">
            <img ng-src="{{follower.image || 'https://www.kifi.com/assets/img/ghost.200.png'}}" class="manage-lib-follower-image">
            <div class="manage-lib-follower-name">{{follower.firstName}} {{follower.lastName}}</div>
            <div class="manage-lib-follower-status">Following</div>
          </li>
        </ul>
      </div>

      <div class="dialog-buttons">
        <button class="manage-lib-create-button" ng-if="!modifyingExistingLibrary" ng-click="saveLibrary()">Create Library</button>
        <button class="manage-lib-save-button" ng-if="modifyingExistingLibrary" ng-click="saveLibrary()">Save</button>
        <a ng-if="modifyingExistingLibrary" class="manage-lib-delete-link" href="javascript:" ng-click="deleteLibrary()">Delete library</a>
      </div>
    </div>
  </div>
</div>
