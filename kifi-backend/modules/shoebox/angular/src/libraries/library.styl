// TODO(yiping): move library card styles to its own .styl file

// Library card colors
invite-header-orange = #ff7c3c

.kf-library-card-header
  margin-bottom: 10px
  padding: 0 25px 0 30px

.kf-logged-out .kf-library-card-header
  margin-bottom: 0
  background-color: #fff

.delighted-visible ~ div .kf-library-card-header
  margin-top: 10px

// For library cards that are displayed when there
// is no logged in user.
.library-card.loggedOutUser
  border: none
  margin: 0 auto
  padding-bottom: 20px
  width: 745px
  max-height: 5000px
  transition: max-height 0.2s ease
  box-shadow: none

  &::before
    position: absolute
    top: 0
    left: -5000px
    display: block
    box-shadow: none
    width: 9999px
    height: 100%
    background-color: #fff
    content: ''
    z-index: -1

  .kf-keep-body
  .kf-keep-lib-header
    max-height: 5000px
    transition: max-height 0.2s ease

  .kf-keep-lib-name-container
    width: 100%
    height: auto
    max-height: 5000px
    padding-top: 20px
    transition: opacity 0.2s ease, max-height 0.2s ease

  .kf-keep-lib-name
    text-align: center
    display: inline-block
    width: calc(100% - 30px)
    font-size: 42px
    line-height: 1.23em
    font-weight: bold
    vertical-align: middle
    font-family: Merriweather, Lato, Helvetica, Arial, sans-serif

  .kf-keep-lib-info
    margin: 30px 40px 0
    transition: margin-top 0.2s ease

  .kf-keep-lib-owner
    position: relative
    left: 0
    transition: left 0.4s ease

  .kf-keep-lib-search
    transition: right 0.3s ease

  .kf-keep-lib-search-input
    padding-left: 30px
    transition: width 0.3s ease

  .kf-keep-lib-search-icon
    position: absolute
    top: 8px
    left: 8px
    width: 18px
    height: 18px
    display: block
    background-image: url('/img/sprites.png')
    background-position: -103px -328px
    background-size: 200px auto

  .dialog-x
    display: none

  .kf-keep-lib-description-container
  .kf-keep-lib-stats-and-followers
  .kf-keep-footer
    max-height: 5000px
    transition: opacity 0.2s ease, max-height 0.2s ease, visibility 0.2s ease

  .kf-keep-lib-footer-button-follow-in-search
    position: fixed
    top: -100px
    min-width: 82px
    z-index: 501

//
// For logged-out library search.
//
html:not(.kf-mobile)
  .library-search .library-card
  .library-card.library-search-in-progress
    max-height: 90px
    position: fixed
    top: 62px
    z-index: 500

    &.pageScrolled::before
      box-shadow: 0px 5px 5px #ddd

    .kf-keep-body
      max-height: 90px

    .kf-keep-lib-header
      max-height: 0

    .kf-keep-lib-name-container
    .kf-keep-lib-description-container
    .kf-keep-lib-stats-and-followers
    .kf-keep-footer
      opacity: 0
      max-height: 0
      visibility: hidden

    .kf-keep-lib-info
      margin-top: 0

    .kf-keep-lib-owner
      left: -55px

    .kf-keep-lib-search
      right: -100px

    .kf-keep-lib-search-input
      width: 495px

    .dialog-x
      display: block
      top: -10px
      right: -10px


.public-library-empty-explain
  font-size: 18px
  margin: 0
  color: #666

.library-card
  // Do not display text on buttons when the card is very narrow
  @media screen and (max-width: 1250px)
    .library-button-with-icon
      padding: 0
      width: 41px
      height: 32px
      font-size: 0

    .kf-keep-lib-footer-share-link-text
      display: none

    .library-share-menu
      left: -44px

  .library-card-invite-header
    padding: 10px 32px
    max-height: 200px
    background-color: invite-header-orange
    opacity: 1

    &.ng-hide
      transition: opacity .4s, max-height .4s .4s
      max-height: 0
      opacity: 0

  .library-card-invite-header-info
    font-size: 13px
    color: #fff
    line-height: 25px

  .library-card-invite-header-button
    float: right
    margin-left: 10px
    border: 1px solid #fff
    border-radius: 5px
    padding: 5px 15px
    font-size: 11px

    &.library-card-invite-header-accept
      background: #fff
      color: invite-header-orange

    &.library-card-invite-header-ignore
      background: invite-header-orange
      color: #fff

  .kf-keep-lib-header
    padding-top: 20px

  .kf-keep-lib-icon-container
    display: inline-block

  .kf-keep-lib-icon
    display: inline-block
    margin-right: 22px
    width: 58px
    height: 77px
    background-repeat: no-repeat

    @media screen and (max-width: 800px)
      display: none

  .kf-keep-lib-name-container
    display: inline-block
    width: calc(100% - 80px)
    height: 60px
    margin-top: 8px
    margin-bottom: 9px
    vertical-align: top
    overflow: hidden

    &::before
      content: '';
      display: inline-block;
      height: 100%;
      vertical-align: middle;

  .kf-keep-lib-name
    display: inline-block
    width: calc(100% - 30px)
    font-size: 26px
    font-weight: bold
    vertical-align: middle

  .kf-keep-lib-info
    margin: 0 25px 10px 80px
    color: kifiBlack
    vertical-align: top

    @media screen and (max-width: 800px)
      margin: 0 8px

  .kf-keep-lib-owner
    position: relative
    padding-bottom: 10px
    padding-top: 5px

  .kf-keep-lib-user-image
    display: inline-block
    margin-right: 10px
    border-radius: 100%
    width: 42px
    height: 42px

  .kf-keep-lib-owner-text
    display: inline-block
    font-size: 14px
    line-height: 1.3em
    vertical-align: middle

  .kf-keep-lib-owner-name
    color: #939393

  .kf-keep-lib-search
    position: absolute
    top: 10px
    right: 0

  .kf-keep-lib-search-input
    border: 1px solid #ccc
    border-radius: 10px
    font-size: 14px
    padding: 8px 8px
    width: 140px

  .kf-keep-lib-description-container
    padding-bottom: 5px

    .kf-desc-more
      font-size: 11px

  .kf-keep-lib-description
    margin: 10px 0
    line-height: 23px

  .kf-keep-lib-stats-and-followers
    border-top: 1px solid #dadae2
    padding-top: 15px

  .kf-keep-lib-metrics
    display: inline-block

  .kf-keep-lib-keeps-followers-stats
    display: inline-block
    margin: 0 20px 0 5px
    font-size: 12px

  .kf-keep-lib-stats-heading
  .kf-keep-lib-stats-number
    display: block

  .kf-keep-lib-stats-heading
    color: textDarkGrey
    text-transform: uppercase

  .kf-keep-lib-stats-number
    padding-top: 3px
    font-size: 16px
    font-weight: bold
    text-align: center

  .kf-keep-lib-follower-preview
    display: inline

  .kf-keep-lib-follower-pics
    display: inline-block
    height: 42px
    vertical-align: top

    .kf-keep-lib-user-image
      margin-right: 8px

  .kf-keep-lib-additional-followers
    display: inline-block
    border-radius: 21px
    padding: 0 6px 0 5px
    height: 42px
    background-color: kifiBlack
    color: #fff
    vertical-align: top
    cursor: pointer
    min-width: 31px

  .kf-keep-lib-additional-followers-text
    display: block
    padding-top: 12px
    text-align: center

  .kf-keep-footer
    border-top: 2px solid #f5f5f5
    padding: 15px 20px
    background-color: #fff

  .kf-library-share-search
    vertical-align: top

  .kf-keep-lib-footer-button-right
    float: right
    margin-right: 0

  .kf-keep-lib-footer-button-follow-unfollow
    padding-left: 17px

  .kf-keep-lib-footer-button-follow
    border: none
    background: #008aee
    color: white
    &.stickable
      z-index: 501
      -webkit-transform: translateZ(1px)
      -moz-transform: translateZ(1px)
      -o-transform: translateZ(1px)
      transform: translateZ(1px)

  .kf-keep-lib-footer-button-unfollow
    border: 1px solid #20a1f1
    width: 81px
    background: #fff
    color: #20a1f1

    &:hover
      border: 1px solid redColor

    &::after
      content: 'Following'

    &:hover::after
      content: 'Unfollow'
      color: redColor

  .kf-keep-lib-edit-keeps-button
    margin-right: 15px
    padding-left: 15px

  .kf-keep-lib-image
    width: 100%
    padding-top: 30px

// This should be in common; it's so messy right now.
.kf-keep-lib-footer-button
  display: inline-block
  position: relative
  vertical-align: top
  margin-right: 15px
  border: 1px solid #bbb
  border-radius: 5px
  padding: 8px 15px 8px 40px
  background: linear-gradient(to top, #f3f3f3, #fff)
  font-family: Lato, Helvetica, Arial, sans-serif
  font-size: 13px
  color: #666

  .kf-keep-lib-footer-share-link-text
    color: #666

  &.kf-keep-lib-footer-twitter-button
    padding: 0

    .kf-keep-lib-footer-share-link
      display: block
      height: 16px
      padding: 8px 15px 8px 40px

  &.kf-keep-lib-footer-twitter-button
  &.kf-keep-lib-footer-facebook-button
    .public-body &
      background: #5b6273
      border-color: #5b6273

      .kf-keep-lib-footer-share-link-text
        color: white

.kf-keep-lib-footer-button-icon
  position: absolute
  top: 7px
  left: 12px
  width: 18px
  height: 18px
  background-repeat: no-repeat
  background-position: center center
  background-size: contain

  &.svg-twitter-white
  &.svg-facebook-white
    display: none

  .public-body &
    &.svg-twitter-white
    &.svg-facebook-white
      display: block

    &.svg-twitter
    &.svg-facebook
      display: none

.kf-library-share-search
  position: relative
  display: inline-block

  [contenteditable]:empty::before
    color: secondaryTextGray

.library-share-menu
  display: none
  position: absolute
  left: 0
  box-sizing: border-box
  margin-top: 5px
  width: 320px
  line-height: normal
  z-index: 2

.library-share-menu-content
  overflow: hidden
  border: 1px solid #b5b5b5
  border-top: none
  border-bottom-left-radius: 5px
  border-bottom-right-radius: 5px
  box-shadow: 0px 4px 8px 0px #afafaf

  .library-share-input-box
    position: relative
    border-bottom: 1px solid #d2d2d2

  .library-share-input
    box-sizing: border-box
    padding: 13px 10px
    width: 320px
    background-color: #f8f8f8
    font-size: 12px
    placeholder secondaryTextGray

    &.library-share-message-input
      min-height: 50px
      resize: none
      border-width: 1px 0px

    .manage-lib-invite &
      padding-left: 35px

  .library-share-search-spinner
    position: absolute
    right: 0
    padding: 3px 15px 0 0

  .kf-query-icon
    position: absolute;
    top: 9px;
    left: 10px;
    width: 21px;
    height: 22px;
    background-image: url("/img/sprites.png");
    background-position: -108px -141px;
    background-size: 210px 203px;

.library-share-menu-header
  padding: 12px 18px
  border-top-left-radius: 5px
  border-top-right-radius: 5px
  background-color: kifiBlack
  font-size: 12px
  color: #fff

  &::before
    position: absolute
    top: -13px
    left: 51px
    border-left: 15px solid transparent
    border-right: 15px solid transparent
    border-bottom: 15px solid kifiBlack
    width: 0
    height: 0
    content: ''

.library-share-contact-list
  max-height: 285px
  overflow-x: hidden
  overflow-y: auto

.library-share-contact
  box-sizing: border-box
  border-top: 1px solid borderLightGray
  padding: 8px 12px
  width: 320px
  height: 53px
  background: #fff

  &:first-child
    border-top: none

  &.library-share-selected
    background-color: #f8f8f8

.library-share-actionable
  &:hover
    cursor: pointer

.library-share-sent
.library-share-following
  display: inline-block
  position: absolute
  top: 12px
  color: green  // TODO(yiping): break out following into its own color

.library-share-sent
  right: 28px

.library-share-following
  right: 22px

.library-share-contact-container
  position: relative

.library-share-contact-image
  display: inline-block
  margin-right: 15px
  border-radius: 100%
  width: 36px
  height: 36px
  vertical-align: top

.library-share-contact-email-icon
  @extend .library-share-contact-image
  background-image: url(/img/mail.2x.png)
  background-position: center 9px
  background-repeat: no-repeat
  background-size: 62% 48%
  background-color: #e36766

.library-share-contact-new-email-icon
  @extend .library-share-contact-email-icon
  background-color: #32495e

.library-share-contact-gmail-icon
  @extend .library-share-contact-email-icon
  border: 1px solid borderLightGray
  background-image: url("data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 45555 33097%22><path fill=%22%23e75a4d%22 d=%22M41608 250c2030,0 3691,1661 3691,3691l0 1070 -5128 3663 -17458 12026 -17458 -12148 0 24295 -1314 0c-2030,0 -3691,-1661 -3691,-3691l0 -25214c0,-2030 1661,-3691 3691,-3691l18772 13918 18894 -13918z%22/><polygon fill=%22%23e7e4d7%22 points=%225255,8552 5255,32847 40172,32847 40172,8674 22713,20700%22/><polygon fill=%22%23b8b7ae%22 points=%225255,32847 22713,20700 22634,20644 5255,32580%22/><polygon fill=%22%23b7b6ad%22 points=%2240172,8674 40182,32847 22713,20700%22/><path fill=%22%23b2392f%22 d=%22M45299 5011l6 24148c-88,2684 -1251,3642 -5123,3687l-10 -24173 5128 -3663z%22/><polygon fill=%22%23f7f5ed%22 points=%223941,250 22713,14168 41608,250%22/></svg>")
  background-color: #fff

.library-share-contact-summary
  display: inline-block
  margin-top: 3px
  width: 164px
  line-height: 1.4em

.library-share-contact-name
  overflow: hidden
  font-size: 14px
  color: #000
  text-overflow: ellipsis
  white-space: nowrap

  .library-share-new-email &
    font-weight: bold

.library-share-contact-network
  overflow: hidden
  font-size: 12px
  color: secondaryTextGray
  text-overflow: ellipsis
  white-space: nowrap

.library-share-contact-import-gmail
  position: relative
  top: 10px
  overflow: hidden
  font-size: 14px
  color: #000
  text-overflow: ellipsis
  white-space: nowrap

.kf-library-share-search
  .library-share-contact-button
    @extend .kf-keep-lib-footer-button
    display: inline-block
    position: absolute
    top: 5px
    padding: 5px 10px 5px 30px
    font-size: 12px

    .kf-keep-lib-footer-button-icon
      top: 5px
      left: 10px
      width: 15px
      height: 15px

.kf-lib-passphrase-message
  margin-left: 30px

.kf-lib-passphrase-header
  color: #3DA9F5
  font-size: 18px
  font-weight: 600

.kf-lib-passphrase-directions
  color: #687A8D
  font-size: 16px
  font-weight: 400
  line-height: 24px

.passphrase-lock-icon
  position: relative
  top: -2px
  left: -1px
  width: 15px
  height: 20px
  margin: 0px 10px

.kf-lib-passphrase-input-box
  float: left
  border: 2px solid #ff3e45
  background-color: #ff3e45
  border-radius: 6px
  color: #3DA9F5

  ::-webkit-input-placeholder
    color: #3DA9F5
  :-moz-placeholder
    color: #3DA9F5
  ::-moz-placeholder
    color: #3DA9F5
  :-ms-input-placeholder
    color: #3DA9F5

  input
    position: relative
    margin-left: 0px
    padding-left: 10px
    height: 35px
    width: 200px
    font-size: 15px
    color: #3DA9F5
    background-color: white
    border-radius: 0 5px 5px 0


.kf-lib-passphrase-button
  display: inline-block
  padding: 6px 25px 8px 15px
  margin-left: 10px
  background-color: #3DA9F5
  border: none
  border-radius: 6px
  color: #fff
  font-size: 16px
  font-weight: 200
  cursor: pointer

  &:hover
    background-color: #54B3F6

.passphrase-key-icon
  position: relative
  top: 7px
  display: inline-block
  width: 25px
  height: 25px
  margin-right: 5px

.passphrase-key-text
  position: relative
  top: 2px

.kf-lib-passphrase-example
  margin-top: 10px
  color: #687A8D
  font-size: 12px
  font-weight: 400

.kf-lib-access-error
  padding: 25px
  border-radius: 5px
  margin-top: 20px
  background: #FFCACA
