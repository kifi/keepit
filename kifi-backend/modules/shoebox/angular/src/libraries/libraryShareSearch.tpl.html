<div class="kf-library-share-search">
  <button class="library-share-btn">Send</button>

  <div class="library-share-menu">
    <header class="library-share-menu-header">Send this library</header>

    <div contenteditable="true" class="library-share-input library-share-message-input" ng-model="share.message" placeholder="Write something?"></div>
    
    <input type="text" class="library-share-input library-share-search-input" ng-model="search.name" placeholder="Search people" ng-focus="onSearchInputFocus()" ng-change="onSearchInputChange()" ng-keydown="processKeyEvent($event)">
    
    <ul class="library-share-contact-list">
      <li class="library-share-contact" ng-repeat="result in results" ng-mouseenter="onResultHover(result)" ng-mouseleave="onResultUnhover(result)" ng-class="{'library-share-selected': result.selected, 'library-share-actionable': result.actionable}">
        <!-- Kifi friend -->
        <div ng-if="result.id" class="library-share-contact-container">
          <img ng-src="{{result.image || 'https://www.kifi.com/assets/img/ghost.200.png'}}" class="library-share-contact-image">
          <div class="library-share-contact-summary">
            <div class="library-share-contact-name">{{result.name}}</div>
            <div class="library-share-contact-network">Kifi user</div>
          </div>
          <!-- TODO(yiping): probably factor this button/notification thing out into its own directive. -->
          <button ng-show="!result.sent && !result.isFollowing" ng-click="shareLibraryKifiFriend(result)" class="library-share-contact-button">Share</button>
          <div ng-show="result.isFollowing" class="library-share-following">Following</div>
          <div ng-show="result.sent" class="library-share-sent">Sent!</div>
        </div>

        <!-- Existing email contact -->
        <div ng-if="!result.id && !result.custom" class="library-share-contact-container">
          <div class="library-share-contact-email-icon"></div>
          <div class="library-share-contact-summary">
            <div class="library-share-contact-name">Email to</div>
            <div class="library-share-contact-network">
              {{result.name || result.email}}
            </div>
          </div>
          <button ng-show="!result.sent" ng-click="shareLibraryExistingEmail(result)" class="library-share-contact-button">Share</button>
          <div ng-show="result.sent" class="library-share-sent">Sent!</div>
        </div>

        <!-- Send to any email -->
        <div ng-if="result.custom === 'email'" ng-click="shareLibraryNewEmail(result)" class="library-share-contact-container">
          <div>
            <div class="library-share-contact-new-email-icon"></div>
            <div class="library-share-contact-summary">
              <div class="library-share-contact-name">{{email}}</div>
              <div class="library-share-contact-network">{{emailHelp}}</div>
            </div>
          </div>
        </div>

        <!-- Import from Gmail -->
        <div ng-if="result.custom === 'importGmail'" ng-click="importGmail()" class="library-share-contact-container">
          <div>
            <div class="library-share-contact-gmail-icon"></div>
            <div class="library-share-contact-summary">
              <div class="library-share-contact-import-gmail">Import Gmail contacts</div>
            </div>
          </div>
        </div>

        <div class="clearfix"></div>
      </li>
    </ul>

    <footer class="library-share-menu-footer"></footer>
  </div>
</div>
