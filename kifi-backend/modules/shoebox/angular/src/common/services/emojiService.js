'use strict';

angular.module('kifi')

  .factory('emojiService', [
    function () {
      // emoji-cheat-sheet.com
      // github.com/valeriomazzeo/NSString-Emoji/blob/master/NSString+Emoji.m
      var encodeMap = {
        '😄': ':smile:',
        '😆': ':laughing:',
        '😊': ':blush:',
        '😃': ':smiley:',
        '☺': ':relaxed:',
        '😏': ':smirk:',
        '😍': ':heart_eyes:',
        '😘': ':kissing_heart:',
        '😚': ':kissing_closed_eyes:',
        '😳': ':flushed:',
        '😥': ':relieved:',
        '😌': ':satisfied:',
        '😁': ':grin:',
        '😉': ':wink:',
        '😜': ':wink2:',
        '😝': ':stuck_out_tongue_closed_eyes:',
        '😀': ':grinning:',
        '😗': ':kissing:',
        '😙': ':kissing_smiling_eyes:',
        '😛': ':stuck_out_tongue:',
        '😴': ':sleeping:',
        '😟': ':worried:',
        '😦': ':frowning:',
        '😧': ':anguished:',
        '😮': ':open_mouth:',
        '😬': ':grimacing:',
        '😕': ':confused:',
        '😯': ':hushed:',
        '😑': ':expressionless:',
        '😒': ':unamused:',
        '😅': ':sweat_smile:',
        '😓': ':sweat:',
        '😩': ':weary:',
        '😔': ':pensive:',
        '😞': ':dissapointed:',
        '😖': ':confounded:',
        '😨': ':fearful:',
        '😰': ':cold_sweat:',
        '😣': ':persevere:',
        '😢': ':cry:',
        '😭': ':sob:',
        '😂': ':joy:',
        '😲': ':astonished:',
        '😱': ':scream:',
        '😫': ':tired_face:',
        '😠': ':angry:',
        '😡': ':rage:',
        '😤': ':triumph:',
        '😪': ':sleepy:',
        '😋': ':yum:',
        '😷': ':mask:',
        '😎': ':sunglasses:',
        '😵': ':dizzy_face:',
        '👿': ':imp:',
        '😈': ':smiling_imp:',
        '😐': ':neutral_face:',
        '😶': ':no_mouth:',
        '😇': ':innocent:',
        '👽': ':alien:',
        '💛': ':yellow_heart:',
        '💙': ':blue_heart:',
        '💜': ':purple_heart:',
        '❤': ':heart:',
        '💚': ':green_heart:',
        '💔': ':broken_heart:',
        '💓': ':heartbeat:',
        '💗': ':heartpulse:',
        '💕': ':two_hearts:',
        '💞': ':revolving_hearts:',
        '💘': ':cupid:',
        '💖': ':sparkling_heart:',
        '✨': ':sparkles:',
        '⭐': ':star:',
        '🌟': ':star2:',
        '💫': ':dizzy:',
        '💥': ':boom:',
        '💢': ':anger:',
        '❗': ':exclamation:',
        '❓': ':question:',
        '❕': ':grey_exclamation:',
        '❔': ':grey_question:',
        '💤': ':zzz:',
        '💨': ':dash:',
        '💦': ':sweat_drops:',
        '🎶': ':notes:',
        '🎵': ':musical_note:',
        '🔥': ':fire:',
        '💩': ':hankey:',
        '👍': ':thumbsup:',
        '👎': ':thumbsdown:',
        '👌': ':ok_hand:',
        '👊': ':punch:',
        '✊': ':fist:',
        '✌': ':v:',
        '👋': ':wave:',
        '✋': ':hand:',
        '👐': ':open_hands:',
        '☝': ':point_up:',
        '👇': ':point_down:',
        '👈': ':point_left:',
        '👉': ':point_right:',
        '🙌': ':raised_hands:',
        '🙏': ':pray:',
        '👆': ':point_up_2:',
        '👏': ':clap:',
        '💪': ':muscle:',
        '🚶': ':walking:',
        '🏃': ':runner:',
        '👫': ':couple:',
        '👪': ':family:',
        '👬': ':two_men_holding_hands:',
        '👭': ':two_women_holding_hands:',
        '💃': ':dancer:',
        '👯': ':dancers:',
        '🙆': ':ok_woman:',
        '🙅': ':no_good:',
        '💁': ':information_desk_person:',
        '🙋': ':raised_hand:',
        '👰': ':bride_with_veil:',
        '🙎': ':person_with_pouting_face:',
        '🙍': ':person_frowning:',
        '🙇': ':bow:',
        '💏': ':couplekiss:',
        '💑': ':couple_with_heart:',
        '💆': ':massage:',
        '💇': ':haircut:',
        '💅': ':nail_care:',
        '👦': ':boy:',
        '👧': ':girl:',
        '👩': ':woman:',
        '👨': ':man:',
        '👶': ':baby:',
        '👵': ':older_woman:',
        '👴': ':older_man:',
        '👱': ':person_with_blond_hair:',
        '👲': ':man_with_gua_pi_mao:',
        '👳': ':man_with_turban:',
        '👷': ':construction_worker:',
        '👮': ':cop:',
        '👼': ':angel:',
        '👸': ':princess:',
        '😺': ':smiley_cat:',
        '😸': ':smile_cat:',
        '😻': ':heart_eyes_cat:',
        '😽': ':kissing_cat:',
        '😼': ':smirk_cat:',
        '🙀': ':scream_cat:',
        '😿': ':crying_cat_face:',
        '😹': ':joy_cat:',
        '😾': ':pouting_cat:',
        '👹': ':japanese_ogre:',
        '👺': ':japanese_goblin:',
        '🙈': ':see_no_evil:',
        '🙉': ':hear_no_evil:',
        '🙊': ':speak_no_evil:',
        '💂': ':guardsman:',
        '💀': ':skull:',
        '👣': ':feet:',
        '👄': ':lips:',
        '💋': ':kiss:',
        '💧': ':droplet:',
        '👂': ':ear:',
        '👀': ':eyes:',
        '👃': ':nose:',
        '👅': ':tongue:',
        '💌': ':love_letter:',
        '👤': ':bust_in_silhouette:',
        '👥': ':busts_in_silhouette:',
        '💬': ':speech_balloon:',
        '💭': ':thought_balloon:',
        '☀': ':sunny:',
        '☔': ':umbrella:',
        '☁': ':cloud:',
        '❄': ':snowflake:',
        '⛄': ':snowman:',
        '⚡': ':zap:',
        '🌀': ':cyclone:',
        '🌁': ':foggy:',
        '🌊': ':ocean:',
        '🐱': ':cat:',
        '🐶': ':dog:',
        '🐭': ':mouse:',
        '🐹': ':hamster:',
        '🐰': ':rabbit:',
        '🐺': ':wolf:',
        '🐸': ':frog:',
        '🐯': ':tiger:',
        '🐨': ':koala:',
        '🐻': ':bear:',
        '🐷': ':pig:',
        '🐽': ':pig_nose:',
        '🐮': ':cow:',
        '🐗': ':boar:',
        '🐵': ':monkey_face:',
        '🐒': ':monkey:',
        '🐴': ':horse:',
        '🐎': ':racehorse:',
        '🐫': ':camel:',
        '🐑': ':sheep:',
        '🐘': ':elephant:',
        '🐼': ':panda_face:',
        '🐍': ':snake:',
        '🐦': ':bird:',
        '🐤': ':baby_chick:',
        '🐥': ':hatched_chick:',
        '🐣': ':hatching_chick:',
        '🐔': ':chicken:',
        '🐧': ':penguin:',
        '🐢': ':turtle:',
        '🐛': ':bug:',
        '🐝': ':honeybee:',
        '🐜': ':ant:',
        '🐞': ':beetle:',
        '🐌': ':snail:',
        '🐙': ':octopus:',
        '🐠': ':tropical_fish:',
        '🐟': ':fish:',
        '🐳': ':whale:',
        '🐋': ':whale2:',
        '🐬': ':dolphin:',
        '🐄': ':cow2:',
        '🐏': ':ram:',
        '🐀': ':rat:',
        '🐃': ':water_buffalo:',
        '🐅': ':tiger2:',
        '🐇': ':rabbit2:',
        '🐉': ':dragon:',
        '🐐': ':goat:',
        '🐓': ':rooster:',
        '🐕': ':dog2:',
        '🐖': ':pig2:',
        '🐁': ':mouse2:',
        '🐂': ':ox:',
        '🐲': ':dragon_face:',
        '🐡': ':blowfish:',
        '🐊': ':crocodile:',
        '🐪': ':dromedary_camel:',
        '🐆': ':leopard:',
        '🐈': ':cat2:',
        '🐩': ':poodle:',
        '🐾': ':paw_prints:',
        '💐': ':bouquet:',
        '🌸': ':cherry_blossom:',
        '🌷': ':tulip:',
        '🍀': ':four_leaf_clover:',
        '🌹': ':rose:',
        '🌻': ':sunflower:',
        '🌺': ':hibiscus:',
        '🍁': ':maple_leaf:',
        '🍃': ':leaves:',
        '🍂': ':fallen_leaf:',
        '🌿': ':herb:',
        '🍄': ':mushroom:',
        '🌵': ':cactus:',
        '🌴': ':palm_tree:',
        '🌲': ':evergreen_tree:',
        '🌳': ':deciduous_tree:',
        '🌰': ':chestnut:',
        '🌱': ':seedling:',
        '🌼': ':blossum:',
        '🌾': ':ear_of_rice:',
        '🐚': ':shell:',
        '🌐': ':globe_with_meridians:',
        '🌞': ':sun_with_face:',
        '🌝': ':full_moon_with_face:',
        '🌚': ':new_moon_with_face:',
        '🌑': ':new_moon:',
        '🌒': ':waxing_crescent_moon:',
        '🌓': ':first_quarter_moon:',
        '🌔': ':waxing_gibbous_moon:',
        '🌕': ':full_moon:',
        '🌖': ':waning_gibbous_moon:',
        '🌗': ':last_quarter_moon:',
        '🌘': ':waning_crescent_moon:',
        '🌜': ':last_quarter_moon_with_face:',
        '🌛': ':first_quarter_moon_with_face:',
        '🌙': ':moon:',
        '🌍': ':earth_africa:',
        '🌎': ':earth_americas:',
        '🌏': ':earth_asia:',
        '🌋': ':volcano:',
        '🌌': ':milky_way:',
        '⛅': ':partly_sunny:',
        '🎍': ':bamboo:',
        '💝': ':gift_heart:',
        '🎎': ':dolls:',
        '🎒': ':school_satchel:',
        '🎓': ':mortar_board:',
        '🎏': ':flags:',
        '🎆': ':fireworks:',
        '🎇': ':sparkler:',
        '🎐': ':wind_chime:',
        '🎑': ':rice_scene:',
        '🎃': ':jack_o_lantern:',
        '👻': ':ghost:',
        '🎅': ':santa:',
        '🎱': ':8ball:',
        '⏰': ':alarm_clock:',
        '🍎': ':apple:',
        '🎨': ':art:',
        '🍼': ':baby_bottle:',
        '🎈': ':balloon:',
        '🍌': ':banana:',
        '📊': ':bar_chart:',
        '⚾': ':baseball:',
        '🏀': ':basketball:',
        '🛀': ':bath:',
        '🛁': ':bathtub:',
        '🔋': ':battery:',
        '🍺': ':beer:',
        '🍻': ':beers:',
        '🔔': ':bell:',
        '🍱': ':bento:',
        '🚴': ':bicyclist:',
        '👙': ':bikini:',
        '🎂': ':birthday:',
        '🃏': ':black_joker:',
        '✒': ':black_nib:',
        '📘': ':blue_book:',
        '💣': ':bomb:',
        '🔖': ':bookmark:',
        '📑': ':bookmark_tabs:',
        '📚': ':books:',
        '👢': ':boot:',
        '🎳': ':bowling:',
        '🍞': ':bread:',
        '💼': ':briefcase:',
        '💡': ':bulb:',
        '🍰': ':cake:',
        '📆': ':calendar:',
        '📲': ':calling:',
        '📷': ':camera:',
        '🍬': ':candy:',
        '📇': ':card_index:',
        '💿': ':cd:',
        '📉': ':chart_with_downwards_trend:',
        '📈': ':chart_with_upwards_trend:',
        '🍒': ':cherries:',
        '🍫': ':chocolate_bar:',
        '🎄': ':christmas_tree:',
        '🎬': ':clapper:',
        '📋': ':clipboard:',
        '📕': ':closed_book:',
        '🔐': ':closed_lock_with_key:',
        '🌂': ':closed_umbrella:',
        '♣': ':clubs:',
        '🍸': ':cocktail:',
        '☕': ':coffee:',
        '💻': ':computer:',
        '🎊': ':confetti_ball:',
        '🍪': ':cookie:',
        '🌽': ':corn:',
        '💳': ':credit_card:',
        '👑': ':crown:',
        '🔮': ':crystal_ball:',
        '🍛': ':curry:',
        '🍮': ':custard:',
        '🍡': ':dango:',
        '🎯': ':dart:',
        '📅': ':date:',
        '♦': ':diamonds:',
        '💵': ':dollar:',
        '🚪': ':door:',
        '🍩': ':doughnut:',
        '👗': ':dress:',
        '📀': ':dvd:',
        '📧': ':e-mail:',
        '🍳': ':egg:',
        '🍆': ':eggplant:',
        '🔌': ':electric_plug:',
        '✉': ':email:',
        '💶': ':euro:',
        '👓': ':eyeglasses:',
        '📠': ':fax:',
        '📁': ':file_folder:',
        '🍥': ':fish_cake:',
        '🎣': ':fishing_pole_and_fish:',
        '🔦': ':flashlight:',
        '💾': ':floppy_disk:',
        '🎴': ':flower_playing_cards:',
        '🏈': ':football:',
        '🍴': ':fork_and_knife:',
        '🍤': ':fried_shrimp:',
        '🍟': ':fries:',
        '🎲': ':game_die:',
        '💎': ':gem:',
        '🎁': ':gift:',
        '⛳': ':golf:',
        '🍇': ':grapes:',
        '🍏': ':green_apple:',
        '📗': ':green_book:',
        '🎸': ':guitar:',
        '🔫': ':gun:',
        '🍔': ':hamburger:',
        '🔨': ':hammer:',
        '👜': ':handbag:',
        '🎧': ':headphones:',
        '♥': ':hearts:',
        '🔆': ':high_brightness:',
        '👠': ':high_heel:',
        '🔪': ':hocho:',
        '🍯': ':honey_pot:',
        '🏇': ':horse_racing:',
        '⌛': ':hourglass:',
        '⏳': ':hourglass_flowing_sand:',
        '🍨': ':ice_cream:',
        '🍦': ':icecream:',
        '📥': ':inbox_tray:',
        '📨': ':incoming_envelope:',
        '📱': ':iphone:',
        '👖': ':jeans:',
        '🔑': ':key:',
        '👘': ':kimono:',
        '📒': ':ledger:',
        '🍋': ':lemon:',
        '💄': ':lipstick:',
        '🔒': ':lock:',
        '🔏': ':lock_with_ink_pen:',
        '🍭': ':lollipop:',
        '➿': ':loop:',
        '📢': ':loudspeaker:',
        '🔅': ':low_brightness:',
        '🔍': ':mag:',
        '🔎': ':mag_right:',
        '🀄': ':mahjong:',
        '📫': ':mailbox:',
        '📪': ':mailbox_closed:',
        '📬': ':mailbox_with_mail:',
        '📭': ':mailbox_with_no_mail:',
        '👞': ':mans_shoe:',
        '🍖': ':meat_on_bone:',
        '📣': ':mega:',
        '🍈': ':melon:',
        '📝': ':memo:',
        '🎤': ':microphone:',
        '🔬': ':microscope:',
        '💽': ':minidisc:',
        '💸': ':money_with_wings:',
        '💰': ':moneybag:',
        '🚵': ':mountain_bicyclist:',
        '🎥': ':movie_camera:',
        '🎹': ':musical_keyboard:',
        '🎼': ':musical_score:',
        '🔇': ':mute:',
        '📛': ':name_badge:',
        '👔': ':necktie:',
        '📰': ':newspaper:',
        '🔕': ':no_bell:',
        '📓': ':notebook:',
        '📔': ':notebook_with_decorative_cover:',
        '🔩': ':nut_and_bolt:',
        '🍢': ':oden:',
        '📂': ':open_file_folder:',
        '📙': ':orange_book:',
        '📤': ':outbox_tray:',
        '📄': ':page_facing_up:',
        '📃': ':page_with_curl:',
        '📟': ':pager:',
        '📎': ':paperclip:',
        '🍑': ':peach:',
        '🍐': ':pear:',
        '✏': ':pencil2:',
        '☎': ':phone:',
        '💊': ':pill:',
        '🍍': ':pineapple:',
        '🍕': ':pizza:',
        '📯': ':postal_horn:',
        '📮': ':postbox:',
        '👝': ':pouch:',
        '🍗': ':poultry_leg:',
        '💷': ':pound:',
        '👛': ':purse:',
        '📌': ':pushpin:',
        '📻': ':radio:',
        '🍜': ':ramen:',
        '🎀': ':ribbon:',
        '🍚': ':rice:',
        '🍙': ':rice_ball:',
        '🍘': ':rice_cracker:',
        '💍': ':ring:',
        '🏉': ':rugby_football:',
        '🎽': ':running_shirt_with_sash:',
        '🍶': ':sake:',
        '👡': ':sandal:',
        '📡': ':satellite:',
        '🎷': ':saxophone:',
        '✂': ':scissors:',
        '📜': ':scroll:',
        '💺': ':seat:',
        '🍧': ':shaved_ice:',
        '👕': ':shirt:',
        '🚿': ':shower:',
        '🎿': ':ski:',
        '🚬': ':smoking:',
        '🏂': ':snowboarder:',
        '⚽': ':soccer:',
        '🔉': ':sound:',
        '👾': ':space_invader:',
        '♠': ':spades:',
        '🍝': ':spaghetti:',
        '🔊': ':speaker:',
        '🍲': ':stew:',
        '📏': ':straight_ruler:',
        '🍓': ':strawberry:',
        '🏄': ':surfer:',
        '🍣': ':sushi:',
        '🍠': ':sweet_potato:',
        '🏊': ':swimmer:',
        '💉': ':syringe:',
        '🎉': ':tada:',
        '🎋': ':tanabata_tree:',
        '🍊': ':tangerine:',
        '🍵': ':tea:',
        '📞': ':telephone_receiver:',
        '🔭': ':telescope:',
        '🎾': ':tennis:',
        '🚽': ':toilet:',
        '🍅': ':tomato:',
        '🎩': ':tophat:',
        '📐': ':triangular_ruler:',
        '🏆': ':trophy:',
        '🍹': ':tropical_drink:',
        '🎺': ':trumpet:',
        '📺': ':tv:',
        '🔓': ':unlock:',
        '📼': ':vhs:',
        '📹': ':video_camera:',
        '🎮': ':video_game:',
        '🎻': ':violin:',
        '⌚': ':watch:',
        '🍉': ':watermelon:',
        '🍷': ':wine_glass:',
        '👚': ':womans_clothes:',
        '👒': ':womans_hat:',
        '🔧': ':wrench:',
        '💴': ':yen:',
        '🚡': ':aerial_tramway:',
        '✈': ':airplane:',
        '🚑': ':ambulance:',
        '⚓': ':anchor:',
        '🚛': ':articulated_lorry:',
        '🏧': ':atm:',
        '🏦': ':bank:',
        '💈': ':barber:',
        '🔰': ':beginner:',
        '🚲': ':bike:',
        '🚙': ':blue_car:',
        '⛵': ':boat:',
        '🌉': ':bridge_at_night:',
        '🚅': ':bullettrain_front:',
        '🚄': ':bullettrain_side:',
        '🚌': ':bus:',
        '🚏': ':busstop:',
        '🚗': ':car:',
        '🎠': ':carousel_horse:',
        '🏁': ':checkered_flag:',
        '⛪': ':church:',
        '🎪': ':circus_tent:',
        '🌇': ':city_sunrise:',
        '🌆': ':city_sunset:',
        '🚧': ':construction:',
        '🏪': ':convenience_store:',
        '🎌': ':crossed_flags:',
        '🏬': ':department_store:',
        '🏰': ':european_castle:',
        '🏤': ':european_post_office:',
        '🏭': ':factory:',
        '🎡': ':ferris_wheel:',
        '🚒': ':fire_engine:',
        '⛲': ':fountain:',
        '⛽': ':fuelpump:',
        '🚁': ':helicopter:',
        '🏥': ':hospital:',
        '🏨': ':hotel:',
        '♨': ':hotsprings:',
        '🏠': ':house:',
        '🏡': ':house_with_garden:',
        '🗾': ':japan:',
        '🏯': ':japanese_castle:',
        '🚈': ':light_rail:',
        '🏩': ':love_hotel:',
        '🚐': ':minibus:',
        '🚝': ':monorail:',
        '🗻': ':mount_fuji:',
        '🚠': ':mountain_cableway:',
        '🚞': ':mountain_railway:',
        '🗿': ':moyai:',
        '🏢': ':office:',
        '🚘': ':oncoming_automobile:',
        '🚍': ':oncoming_bus:',
        '🚔': ':oncoming_police_car:',
        '🚖': ':oncoming_taxi:',
        '🎭': ':performing_arts:',
        '🚓': ':police_car:',
        '🏣': ':post_office:',
        '🚃': ':railway_car:',
        '🌈': ':rainbow:',
        '🚀': ':rocket:',
        '🎢': ':roller_coaster:',
        '🚨': ':rotating_light:',
        '📍': ':round_pushpin:',
        '🚣': ':rowboat:',
        '🏫': ':school:',
        '🚢': ':ship:',
        '🎰': ':slot_machine:',
        '🚤': ':speedboat:',
        '🌃': ':stars:',
        '🚉': ':station:',
        '🗽': ':statue_of_liberty:',
        '🚂': ':steam_locomotive:',
        '🌅': ':sunrise:',
        '🌄': ':sunrise_over_mountains:',
        '🚟': ':suspension_railway:',
        '🚕': ':taxi:',
        '⛺': ':tent:',
        '🎫': ':ticket:',
        '🗼': ':tokyo_tower:',
        '🚜': ':tractor:',
        '🚥': ':traffic_light:',
        '🚆': ':train2:',
        '🚊': ':tram:',
        '🚩': ':triangular_flag_on_post:',
        '🚎': ':trolleybus:',
        '🚚': ':truck:',
        '🚦': ':vertical_traffic_light:',
        '⚠': ':warning:',
        '💒': ':wedding:',
        '🇯🇵': ':jp:',
        '🇰🇷': ':kr:',
        '🇨🇳': ':cn:',
        '🇺🇸': ':us:',
        '🇫🇷': ':fr:',
        '🇪🇸': ':es:',
        '🇮🇹': ':it:',
        '🇷🇺': ':ru:',
        '🇬🇧': ':gb:',
        '🇩🇪': ':de:',
        '💯': ':100:',
        '🔢': ':1234:',
        '🅰': ':a:',
        '🆎': ':ab:',
        '🔤': ':abc:',
        '🔡': ':abcd:',
        '🉑': ':accept:',
        '♒': ':aquarius:',
        '♈': ':aries:',
        '◀': ':arrow_backward:',
        '⏬': ':arrow_double_down:',
        '⏫': ':arrow_double_up:',
        '⬇': ':arrow_down:',
        '🔽': ':arrow_down_small:',
        '▶': ':arrow_forward:',
        '⤵': ':arrow_heading_down:',
        '⤴': ':arrow_heading_up:',
        '⬅': ':arrow_left:',
        '↙': ':arrow_lower_left:',
        '↘': ':arrow_lower_right:',
        '➡': ':arrow_right:',
        '↪': ':arrow_right_hook:',
        '⬆': ':arrow_up:',
        '↕': ':arrow_up_down:',
        '🔼': ':arrow_up_small:',
        '↖': ':arrow_upper_left:',
        '↗': ':arrow_upper_right:',
        '🔃': ':arrows_clockwise:',
        '🔄': ':arrows_counterclockwise:',
        '🅱': ':b:',
        '🚼': ':baby_symbol:',
        '🛄': ':baggage_claim:',
        '☑': ':ballot_box_with_check:',
        '‼': ':bangbang:',
        '⚫': ':black_circle:',
        '🔲': ':black_square_button:',
        '♋': ':cancer:',
        '🔠': ':capital_abcd:',
        '♑': ':capricorn:',
        '💹': ':chart:',
        '🚸': ':children_crossing:',
        '🎦': ':cinema:',
        '🆑': ':cl:',
        '🕐': ':clock1:',
        '🕙': ':clock10:',
        '🕥': ':clock1030:',
        '🕚': ':clock11:',
        '🕦': ':clock1130:',
        '🕛': ':clock12:',
        '🕧': ':clock1230:',
        '🕜': ':clock130:',
        '🕑': ':clock2:',
        '🕝': ':clock230:',
        '🕒': ':clock3:',
        '🕞': ':clock330:',
        '🕓': ':clock4:',
        '🕟': ':clock430:',
        '🕔': ':clock5:',
        '🕠': ':clock530:',
        '🕕': ':clock6:',
        '🕡': ':clock630:',
        '🕖': ':clock7:',
        '🕢': ':clock730:',
        '🕗': ':clock8:',
        '🕣': ':clock830:',
        '🕘': ':clock9:',
        '🕤': ':clock930:',
        '㊗': ':congratulations:',
        '🆒': ':cool:',
        '©': ':copyright:',
        '➰': ':curly_loop:',
        '💱': ':currency_exchange:',
        '🛃': ':customs:',
        '💠': ':diamond_shape_with_a_dot_inside:',
        '🚯': ':do_not_litter:',
        '8⃣': ':eight:',
        '✴': ':eight_pointed_black_star:',
        '✳': ':eight_spoked_asterisk:',
        '🔚': ':end:',
        '⏩': ':fast_forward:',
        '5⃣': ':five:',
        '4⃣': ':four:',
        '🆓': ':free:',
        '♊': ':gemini:',
        '#⃣': ':hash:',
        '💟': ':heart_decoration:',
        '✔': ':heavy_check_mark:',
        '➗': ':heavy_division_sign:',
        '💲': ':heavy_dollar_sign:',
        '➖': ':heavy_minus_sign:',
        '✖': ':heavy_multiplication_x:',
        '➕': ':heavy_plus_sign:',
        '🆔': ':id:',
        '🉐': ':ideograph_advantage:',
        'ℹ': ':information_source:',
        '⁉': ':interrobang:',
        '🔟': ':keycap_ten:',
        '🈁': ':koko:',
        '🔵': ':large_blue_circle:',
        '🔷': ':large_blue_diamond:',
        '🔶': ':large_orange_diamond:',
        '🛅': ':left_luggage:',
        '↔': ':left_right_arrow:',
        '↩': ':leftwards_arrow_with_hook:',
        '♌': ':leo:',
        '♎': ':libra:',
        '🔗': ':link:',
        'Ⓜ': ':m:',
        '🚹': ':mens:',
        '🚇': ':metro:',
        '📴': ':mobile_phone_off:',
        '❎': ':negative_squared_cross_mark:',
        '🆕': ':new:',
        '🆖': ':ng:',
        '9⃣': ':nine:',
        '🚳': ':no_bicycles:',
        '⛔': ':no_entry:',
        '🚫': ':no_entry_sign:',
        '📵': ':no_mobile_phones:',
        '🚷': ':no_pedestrians:',
        '🚭': ':no_smoking:',
        '🚱': ':non-potable_water:',
        '⭕': ':o:',
        '🅾': ':o2:',
        '🆗': ':ok:',
        '🔛': ':on:',
        '1⃣': ':one:',
        '⛎': ':ophiuchus:',
        '🅿': ':parking:',
        '〽': ':part_alternation_mark:',
        '🛂': ':passport_control:',
        '♓': ':pisces:',
        '🚰': ':potable_water:',
        '🚮': ':put_litter_in_its_place:',
        '🔘': ':radio_button:',
        '♻': ':recycle:',
        '🔴': ':red_circle:',
        '®': ':registered:',
        '🔁': ':repeat:',
        '🔂': ':repeat_one:',
        '🚻': ':restroom:',
        '⏪': ':rewind:',
        '🈂': ':sa:',
        '♐': ':sagittarius:',
        '♏': ':scorpius:',
        '㊙': ':secret:',
        '7⃣': ':seven:',
        '📶': ':signal_strength:',
        '6⃣': ':six:',
        '🔯': ':six_pointed_star:',
        '🔹': ':small_blue_diamond:',
        '🔸': ':small_orange_diamond:',
        '🔺': ':small_red_triangle:',
        '🔻': ':small_red_triangle_down:',
        '🔜': ':soon:',
        '🆘': ':sos:',
        '🔣': ':symbols:',
        '♉': ':taurus:',
        '3⃣': ':three:',
        '™': ':tm:',
        '🔝': ':top:',
        '🔱': ':trident:',
        '🔀': ':twisted_rightwards_arrows:',
        '2⃣': ':two:',
        '🈹': ':u5272:',
        '🈴': ':u5408:',
        '🈺': ':u55b6:',
        '🈯': ':u6307:',
        '🈷': ':u6708:',
        '🈶': ':u6709:',
        '🈵': ':u6e80:',
        '🈚': ':u7121:',
        '🈸': ':u7533:',
        '🈲': ':u7981:',
        '🈳': ':u7a7a:',
        '🔞': ':underage:',
        '🆙': ':up:',
        '📳': ':vibration_mode:',
        '♍': ':virgo:',
        '🆚': ':vs:',
        '〰': ':wavy_dash:',
        '🚾': ':wc:',
        '♿': ':wheelchair:',
        '✅': ':white_check_mark:',
        '⚪': ':white_circle:',
        '💮': ':white_flower:',
        '🔳': ':white_square_button:',
        '🚺': ':womens:',
        '❌': ':x:',
        '0⃣': ':zero:'
      };

      var decodeMap = {};
      Object.keys(encodeMap).forEach(function(ch) {
        decodeMap[encodeMap[ch]] = ch;
      });

      var decodeRe = /:[a-z][a-z0-9_]{0,32}:/g;
      function decodeReplace(m) {
        return decodeMap[m] || m;
      }

      // constructed by hand: number key | specific supported single character | surrogate code point pair | flag (four consecutive surrogate code points)
      var encodeRe = /(?:[#0-9]\u20e3|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u23e9-\u23ec\u23f0\u23f3\u24c2\u25b6\u25c0\u2600\u2601\u260e\u2611\u2614\u2615\u261d\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2693\u26a0\u26a1\u26aa\u26ab\u26bd\u26be\u26c4\u26c5\u26ce\u26d4\u26ea\u26f2\u26f3\u26f5\u26fa\u26fd\u2702\u2705\u2708-\u270c\u270f\u2712\u2714\u2716\u2728\u2733\u2734\u2744\u274c\u274e\u2753-\u2755\u2757\u2764\u2795-\u2797\u27a1\u27b0\u27bf\u2934\u2935\u2b05-\u2b07\u2b50\u2b55\u3030\u303d\u3297\u3299]|\ud83c(?:[\udc00-\udddf\ude00-\udfff]|[\udde0-\uddff]\ud83c[\udde0-\uddff])|\ud83d[\udc00-\ude4f\ude80-\udeff])/g; // jshint ignore:line
      function encodeReplace(m) {
        return encodeMap[m] || m;
      }

      function isSupported() {
        if (supported == null) {
          var c = document.createElement('canvas').getContext('2d');
          c.textBaseline = 'top';
          c.font = '32px Arial';
          c.fillText('😄', 0, 0);
          supported = c.getImageData(16, 16, 1, 1).data[0] !== 0;
        }
        return supported;
      }

      var supported;

      return {
        encode: function (s) {
          return s.replace(encodeRe, encodeReplace);
        },
        decode: function (s) {
          return isSupported ? s.replace(decodeRe, decodeReplace) : s;
        },
        supported: isSupported
      };

    }
  ]);
