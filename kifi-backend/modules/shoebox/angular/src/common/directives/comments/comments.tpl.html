<div class="kf-keep-comments-container">
  <div class="kf-keep-comments" ng-if="visibleCount > 0 || canAddComments" ng-attr-kf-inview="{{ keep.discussion && keep.discussion.numMessages ? 'onInview' : undefined }}">
    <span class="kf-keep-comments-view-previous" ng-if="visibleCount < keep.discussion.numMessages" ng-click="onViewPreviousComments()">View Previous Comments</span>
    <div
      class="kf-keep-comments-comment"
      ng-repeat="comment in comments.slice(-visibleCount)"
      kf-keep-comment
      threadId="keep.discussion.threadId"
      keep="keep"
      comment="comment"
      delete-comment="deleteComment"
    ></div>
    <div class="kf-keep-comments-input-container" ng-if="canAddComments">
      <img ng-src="{{me|pic:100}}" class="kf-keep-comments-input-user-img"/>
      <div
        class="kf-keep-comments-input"
        contenteditable="true"
        placeholder="write a comment..."
        ng-keydown="keydown($event)"
        ng-keyup="keyup($event)"
      ></div>
    </div>
  </div>
  <p class="kf-keep-comments-error" ng-if="error" ng-bind="error"></p>
</div>
