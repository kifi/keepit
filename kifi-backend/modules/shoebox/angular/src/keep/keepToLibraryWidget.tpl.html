<div class="keep-to-library-widget" kf-wheel-stop>
  <div ng-hide="showCreate">
    <header ng-if="widgetActionText" class="keep-to-library-default-header">{{widgetActionText}} to a library</header>

    <div class="keep-to-library-search">
      <span class="keep-to-library-search-input-icon svg-search-icon-gray"></span>
      <input class="keep-to-library-search-input" ng-model="search.name" ng-change="onSearchInputChange(search.name)" placeholder="Search your libraries" ng-keydown="processKeyEvent($event)">
    </div>

    <div class="library-select-list" kf-wheel-allow>
      <div ng-if="widgetKeptInLibraries.length" class="library-group-header kept-to-libraries-group-header">Kept In</div>
      <ul ng-if="widgetKeptInLibraries.length" class="kf-kept-to">
        <li ng-repeat="library in widgetKeptInLibraries" class="library-select-option"
          ng-class="{'selected': library.selected}"
          ng-mouseenter="onHover(library)" ng-mouseleave="onUnhover(library)"
          ng-include="'keep/keepToLibraryWidgetLibraryItem.tpl.html'">
        </li>
      </ul>

      <div ng-if="widgetRecentLibraries.length" class="library-group-header my-libraries-group-header">Recent Libraries</div>
      <ul ng-if="widgetRecentLibraries.length">
        <li ng-repeat="library in widgetRecentLibraries" class="library-select-option"
          ng-class="{'selected': library.selected}"
          ng-mouseenter="onHover(library)" ng-mouseleave="onUnhover(library)"
          ng-include="'keep/keepToLibraryWidgetLibraryItem.tpl.html'">
        </li>
      </ul>

      <div ng-if="widgetOtherLibraries.length && widgetRecentLibraries.length" class="library-group-header my-libraries-group-header">Other Libraries</div>
      <div ng-if="widgetOtherLibraries.length && !widgetRecentLibraries.length" class="library-group-header my-libraries-group-header">My Libraries</div>
      <ul ng-if="widgetOtherLibraries.length">
        <li ng-repeat="library in widgetOtherLibraries" class="library-select-option"
          ng-class="{'selected': library.selected}"
          ng-mouseenter="onHover(library)" ng-mouseleave="onUnhover(library)"
          ng-include="'keep/keepToLibraryWidgetLibraryItem.tpl.html'">
        </li>
      </ul>
    </div>

    <div class="keep-to-library-create" ng-click="showCreatePanel()">
      <span class="keep-to-library-lib-icon-container">
        <span class="keep-to-library-lib-icon svg-add-a-library-icon"></span>
      </span>
      Create new library
    </div>
  </div>

  <div ng-show="showCreate">
    <header class="keep-to-library-create-header">
      <span class="keep-to-library-back-arrow" ng-click="hideCreatePanel()"></span>Keep to a new library
    </header>
    <div class="keep-to-library-create-heading">Name Your Library</div>
    <div class="keep-to-library-create-name-input-container">
      <input class="keep-to-library-create-name-input" ng-model="newLibrary.name" placeholder="Name your library">
      <span ng-show="$error.name" class="keep-to-library-create-name-error">{{$error.name}}</span>
    </div>

    <div class="keep-to-library-create-heading">Location</div>
    <div class="keep-to-library-create-org-selector">
      <div
        kf-org-selector
        library-props="libraryProps"
        library="newLibrary"
        space="{}"
      >
      </div>
    </div>

    <div class="keep-to-library-create-heading">Privacy</div>
    <div class="keep-to-library-create-visibility">
      <div class="keep-to-library-create-visibility-switch" kf-library-visibility-selector library="newLibrary"></div>
    </div>
    <div ng-show="$error.general" class="keep-to-library-create-general-error">{{$error.general}}</div>
    <div class="keep-to-library-create-button-container">
      <button class="keep-to-library-create-button" ng-click="createLibrary(newLibrary)">Create Library</button>
    </div>
  </div>
</div>
