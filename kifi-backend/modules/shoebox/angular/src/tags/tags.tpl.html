<div class="kf-tags">
  <div class="kf-nav-group-name">Tags</div>
  <label class="kf-nav-item kf-tag-input-box">
    <input name="filterName" placeholder="Find or add a tag..." ng-model="filter.name" focus-when="focusFilter" ng-keydown="onKeydown($event)" ng-blur="dehighlight()">
    <a class="kf-tag-input-clear" href="javascript:" ng-click="clearFilter(true)" ng-show="filter.name">&times;</a>
  </label>
</div>
<div class="kf-tag-list-hidden"></div>
<ul class="kf-tag-list" antiscroll="{ autoHide: false }">
  <li class="kf-nav-item kf-tag" ui-draggable="true" drag="tag" ng-class="{ active: isActiveTag(tag), highlight: isHighlight(tag), new: tag.isNew, renaming: isRenaming(tag) }" ng-repeat="tag in shownTags = (tags | filter: filter)">
    <a class="kf-nav-link" ng-href="/tag/{{tag.id}}">
      <span class="kf-tag-icon"></span>
      <span class="kf-tag-name">{{tag.name}}</span>
      <span class="kf-tag-count">{{tag.keeps}}</span>
    </a>
    <input class="kf-tag-rename" type="text" placeholder="Type new tag name" ng-model="renameTag.value" ng-keydown="onRenameKeydown($event)" ng-if="isRenaming(tag)" autofocus>
    <div class="dropdown">
      <a class="dropdown-toggle"></a>
      <ul class="dropdown-menu">
        <li>
          <a href="javascript:" ng-click="rename(tag)">Rename</a>
        </li>
        <li>
          <a href="javascript:" ng-click="remove(tag)">Remove</a>
        </li>
      </ul>
    </div>
  </li>
  <li class="kf-nav-item kf-tag kf-tag-new" ng-class="{ highlight: isHighlightNew() }" ng-show="showAddTag()">
    <a href="javascript:" ng-click="create(filter.name)">
      <span class="kf-tag-icon kf-tag-icon-create"></span>
      <span class="kf-tag-caption">Add a new tag:</span>
      <span class="kf-tag-name">{{filter.name}}</span>
    </a>
  </li>
</ul>
