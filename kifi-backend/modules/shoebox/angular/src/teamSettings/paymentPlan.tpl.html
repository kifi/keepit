<div class="kf-payment-plan">
  <h1 class="kf-payment-plan-top-header">Payment Plan</h1>
  <div kf-billing-summary billing-state="billingState"></div>
  <div class="kf-container">
    <div class="kf-container-header"><h3>Select your plan</h3></div>
    <div class="kf-row kf-payment-plan-cards">
      <div class="kf-payment-plan-card kf-payment-plan-card-free">
        <div class="kf-payment-plan-card-title">Free</div>
        <div class="kf-payment-plan-card-cost">0</div>
        <div class="kf-payment-plan-card-bottom">
          <p class="kf-payment-plan-card-description"><a class="kf-link kf-link-white kf-link-underline" href="#">Details</a></p>
          <p class="kf-payment-plan-card-current" ng-if="isFreePlanName(plan.name)">Your current plan</p>
          <button
            class="kf-payment-plan-card-cta"
            ng-if="!isFreePlanName(plan.name)"
            ng-bind="isNoPlanName(plan.name) ? 'Choose plan' : 'Downgrade'"
            ng-click="changePlanToFree()"
          ></button>
        </div>
      </div>
      <div class="kf-payment-plan-card kf-payment-plan-card-basic">
        <div class="kf-payment-plan-card-title">Standard</div>
        <div class="kf-payment-plan-card-cost">6.67</div>
        <p ng-if="!isPaidPlanName(plan.name)" class="kf-payment-plan-card-description">per user per month when billed anually</p>
        <p ng-if="!isPaidPlanName(plan.name)" class="kf-payment-plan-card-description">$8 billed monthly</p>
        <div class="kf-payment-plan-card-bottom">
          <p class="kf-payment-plan-card-description"><a class="kf-link kf-link-white kf-link-underline" href="#">Details</a></p>
          <p class="kf-payment-plan-card-current" ng-if="isPaidPlanName(plan.name)">Your current plan</p>
          <button
            class="kf-payment-plan-card-cta"
            ng-if="!isPaidPlanName(plan.name)"
            ng-click="changePlanToStandard()"
            ng-bind="(isFreePlanName(plan.name) ? 'Upgrade now' :
              (isNoPlanName(plan.name) ? 'Choose Plan' : 'Downgrade'))"
          ></button>
        </div>
      </div>
      <div class="kf-payment-plan-card kf-payment-plan-card-enterprise">
        <div class="kf-payment-plan-card-title">Enterprise</div>
        <p class="kf-payment-plan-card-soon">Coming Soon</p>
        <div class="kf-payment-plan-card-bottom">
          <p class="kf-payment-plan-card-description"><a class="kf-link kf-link-white kf-link-underline" href="#">Details</a></p>
          <a class="kf-payment-plan-card-cta kf-link kf-link-white" href="mailto:enterprise@kifi.com">Contact us</a>
        </div>
      </div>
    </div>
    <form name="planSelectsForm">
      <p>Select your team's plan. Get details on the plans we offer on the <a class="kf-link" href="#">pricing page</a></p>
      <div class="custom-select kf-button">
        <select
          class="kf-payment-plan-select"
          ng-model="plan.name"
          ng-options="tier.value as tier.label for tier in availableTiers"
        >
          <option value="">Select a plan</option>
        </select>
      </div>
      <div ng-show="isPaidPlanName(plan.name)">
        <h2 class="kf-heading">Choose your Payment Frequency</h2>
        <p>You're paying for <b ng-bind="profile.numMembers"></b> users. With worry-free billing, we'll automatically charge or credit your account with a change in team members.</p>
        <div class="custom-select kf-button">
          <select
            class="kf-payment-plan-select"
            ng-model="plan.cycle"
            ng-options="cycle.value as cycle.label for cycle in availableCycles"
          >
            <option value="">Select a billing cycle</option>
          </select>
        </div>
      <h2 class="kf-heading">Manage your Credit Card Information</h2>
      <p ng-if="!card">You haven't added a card yet.</p>
      <p ng-if="card">Your current card is <b ng-bind="card.brand"></b> ****<b ng-bind="card.last4"></b></p>
      <div>
        <button class="kf-button kf-button-large" ng-click="openStripeCheckout()">Add / Update Credit Card Info</button>
        <span class="kf-text-accent kf-payment-plan-card-ready" ng-if="plan.newCard">Your new card is ready to save</span>
      </div>
    </div>
  </form>
  <div class="kf-payment-plan-save-wrapper">
    <button ng-click="save()" class="kf-button kf-button-large kf-payment-plan-save" ng-disabled="!plan.cycle || !plan.name || !(card && card.last4) || (!plan.newCard && planSelectsForm.$pristine)">Save my plan preferences</button>
  </div>
</div>
