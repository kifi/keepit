@(user:User, clicks:Seq[com.keepit.model.RichKeepClick], rekeeps:Seq[com.keepit.model.RichReKeep])

@admin("Keep-Attribution Infos") {

<ul>
    <li>The following shows <i>personalized</i> lists of recognized <i>keep_click</i> and </i><i>rekeep</i> events in the last week.</li>
    <li>For the <i>global</i> list, check out the <a href="@com.keepit.controllers.admin.routes.AdminAttributionController.keepClicksView(0,50,false)">Keep Clicks page</a> and
        <a href="@com.keepit.controllers.admin.routes.AdminAttributionController.rekeepsView(0,50,false)">ReKeeps Page</a> for more information.</li>
    <li><b>Note</b>: that we started tracking the relevant events only very recently -- on <b>2 May</b> (Friday) to be exact. If the stats do not look good now -- check back in a few days!</li>
</ul>

<h2>Who Viewed my Keeps?</h2>
(You've helped @clicks.length people discover new things in the last week!)

<table class="table table-striped">
    <th><tr>
        <td>Id</td>
        <td>Date</td>
        <td>uuid</td>
        <td>numKeepers</td>
        <td>keep</td>
        <td>uriId</td>
        <td>title</td>
        <td>origin</td>
    </tr></th>
    @for(click <- clicks){
    <tr>
        <td>@click.id</td>
        <td>@adminHelper.dateDisplay(click.createdAt)</td>
        <td>@click.hitUUID.toString().takeRight(5)</td>
        <td>@click.numKeepers</td>
        <td>@click.keep.id.get</td>
        <td>@click.uri.id.get</td>
        <td><a href="@click.uri.url">@if(click.uri.title.getOrElse("").trim.nonEmpty){ @click.uri.title } else { @click.uri.url }</a></td>
        <td>@click.origin.getOrElse("")</td>
    </tr>
    }
</table>

<h2>Who Re-Kept my Keeps?</h2>
(@rekeeps.length people have kept new discoveries into their libraries because of you!)

<table class="table table-striped">
    <th><tr>
        <td>Id</td>
        <td>Date</td>
        <td>keep</td>
        <td>Re-keeper</td>
        <td>Re-keep</td>
        <td>attr_factor (1/n)</td>
        <td>uriId</td>
        <td>title</td>
    </tr></th>
    @for(rekeep <- rekeeps){
    <tr>
        <td>@rekeep.id</td>
        <td>@adminHelper.dateDisplay(rekeep.createdAt)</td>
        <td>@rekeep.keep.id.get</td>
        <td>@adminHelper.userDisplay(rekeep.srcUser)</td>
        <td>@rekeep.srcKeep.id.get</td>
        <td>@rekeep.attributionFactor</td>
        <td>@rekeep.uri.id</td>
        <td><a href="@rekeep.uri.url">@rekeep.uri.title</a></td>
    </tr>
    }
</table>

}