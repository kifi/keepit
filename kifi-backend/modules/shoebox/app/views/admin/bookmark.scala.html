@(user: User, bookmark: Keep, normalizedUri: NormalizedURI, scrapeInfo: Option[ScrapeInfo], imgUrl:String, screenshotUrl: String, keywords: KeywordsSummary)

@import com.keepit.controllers.admin.routes

@admin("Bookmark: " + bookmark.title.getOrElse("")) {
   <table class="table table-bordered">
      <tr>
        <th>Title</th><td><a href="@bookmark.url">@{bookmark.title.getOrElse("NO TITLE")}</a></td>
      </tr>
      <tr>
        <th>Page Content</th><td>@adminHelper.articleDisplay(normalizedUri)</td>
      </tr>
      <tr>
        <th>Bookmark ID</th><td>@bookmark.id.get.id</td>
      </tr>
      <tr>
        <th>URI ID</th><td>@normalizedUri.id.get.id</td>
      </tr>
      <tr>
        <th>IsPrimary?</th><td>@bookmark.isPrimary</td>
      </tr>
      <tr>
        <th>State/Visibility</th><td>@adminHelper.bookmarkBadge(bookmark)</td>
      </tr>
      <tr>
        <th>Saved by</th><td>@adminHelper.userDisplay(user)</td>
      </tr>
      <tr>
        <th>Creation time</th><td>@adminHelper.dateTimeDisplay(bookmark.createdAt)</td>
      </tr>
      <tr>
        <th>Last scrape</th><td>@scrapeInfo.map(si => adminHelper.dateTimeDisplay(si.lastScrape)).mkString</td>
      </tr>
      <tr>
        <th>Next scrape</th><td>@scrapeInfo.map(si => adminHelper.dateTimeDisplay(si.nextScrape)).mkString</td>
      </tr>
      <tr>
        <th>Article Keywords</th><td>@keywords.article.mkString(" ")</td>
      </tr>
      <tr>
        <th>Embedly Keywords</th><td>@keywords.embedly.mkString(" ")</td>
      </tr>
      <tr>
        <th>Word2Vec Cosine Keywords</th><td>@keywords.word2vecCosine.mkString(" ")</td>
      </tr>
      <tr>
        <th>Word2Vec Freq Keywords</th><td>@keywords.word2vecFreq.mkString(" ")</td>
      </tr>
      <tr>
        <th>Word2Vec Word Counts</th><td>@keywords.word2vecWordCount</td>
      </tr>
      <tr>
        <th>keywords best guess</th><td>@keywords.bestGuess.mkString(" ")</td>
      </tr>
      <tr>
        <th>Screenshot</th>
        <td><img src="@screenshotUrl"></td>
      </tr>
      <tr>
        <th>Image (Primary)</th>
        @if(imgUrl.isEmpty){
          <td>No Image Available</td>
        }else{
            <td><img src="@imgUrl" alt="no image available"/></td>
        }
      </tr>
      <tr>
          <td></td>
          <td>
              <form class="form-horizontal" method="GET" action="@com.keepit.controllers.admin.routes.AdminScreenshotController.imagesForUri(normalizedUri.id.get)">
                  <input type="hidden" name="uriId" value="@normalizedUri.id.get"/>
                  <b>Get All Images</b><input type="submit" name="Fetch" />
              </form>
          </td>
      </tr>
   </table>
   <p><input type="button" id="rescrape" value="Rescrape"></p>
   <script>
     $("#rescrape").click(function () {
       var button = $(this);
       var val = button.val();
       button.val("Scraping...");
       $.ajax({
         type: "POST",
         url: "@com.keepit.controllers.admin.routes.AdminBookmarksController.rescrape",
         contentType: "application/json; charset=utf-8",
         data: JSON.stringify({ id: @bookmark.id.get.id }),
         complete: function (jqXHR, status) {
           button.val(status == "success" ? val : "Error!");
           window.location.reload();
         }
       });
     });
   </script>
   <p>
     @helper.form(action = com.keepit.controllers.admin.routes.AdminBookmarksController.delete(bookmark.id.get)) {
       <input type="submit" value="Delete">
     }
   </p>

   <p>
     @helper.form(action = com.keepit.controllers.admin.routes.AdminBookmarksController.inactive(bookmark.id.get)){
       <input type="submit" value="Inactive">
     }
   </p>
}
