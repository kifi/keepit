@import com.keepit.commanders.OrganizationStatistics
@import com.keepit.model._
@(
orgsStats: Map[Id[Organization], OrganizationStatistics],
fakeOwnerId: Id[User]
)(implicit request: com.keepit.common.controller.UserRequest[_])

@orgDisplay(org: OrganizationStatistics) = {
    <a href="@com.keepit.controllers.admin.routes.AdminOrganizationController.organizationViewById(org.orgId)">@org.name</a>
}

@admin(orgsStats.values.count(_.ownerId != fakeOwnerId) + " real organizations", stylesheets = List("admin_user")) {
<table class="orgs-summary table table-bordered">
    <tr><th>Id</th>
        <th>Name</th>
        <th># of members</th>
        <th># of membership candidates</th>
        <th># of member libraries</th>
        <th># of member keeps</th>
        <th># of org libraries</th>
        <th># of org keeps</th>
    </tr>
    @for(orgId <- orgsStats.keys.toSeq.sorted) {
        <tr>
            <td>orgId</td>
            <td>@orgDisplay(orgsStats(orgId))</td>
            <td>@orgsStats(orgId).members.size</td>
            <td>@orgsStats(orgId).candidates.size</td>
            <td>@orgsStats(orgId).userStatistics.values.map(_.librariesCreated).sum</td>
            <td>@orgsStats(orgId).userStatistics.values.map(_.publicKeeps).sum</td>
            <td>@orgsStats(orgId).numLibraries</td>
            <td>@orgsStats(orgId).numTotalKeeps</td>
        </tr>
    }
</table>
<form action="@com.keepit.controllers.admin.routes.AdminOrganizationController.createOrganization()" method="POST" class="form-inline create-org">
    <input id="create-org-owner-id-input" type="text" name="owner-id" value="@fakeOwnerId" placeholder="Creater Id (default @fakeOwnerId)">
    <input id="create-org-input" type="text" name="name" placeholder="Organization Name">
    <input type="Submit" value="Add">
</form>
}
