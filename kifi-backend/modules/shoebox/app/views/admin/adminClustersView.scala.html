@(data: Seq[com.keepit.controllers.admin.ClusterMemberInfo])

    @randomColor(serviceVersion: com.keepit.common.service.ServiceVersion) = {
        <font color="@{
            val colors = Array[String]("0000cd", "006400", "b8860b", "cd5c5c", "ff0000", "9400d3", "8b8989", "000000", "8b4513", "ff8c00", "4682b4")
            colors(Math.abs(serviceVersion.hashCode) % colors.length)
        }">@serviceVersion</font>
    }

    @showInstanceInfo(amazonInstanceInfo: com.keepit.common.amazon.AmazonInstanceInfo) = {
       <table class="table table-bordered">
      <tr>
        <th>Instance</th><td><a href="https://console.aws.amazon.com/ec2/home?region=@{amazonInstanceInfo.availabilityZone}#s=Instances">@{amazonInstanceInfo.instanceId}</a></td>
      </tr>
      <tr>
        <th>Local Hostname</th><td>@{amazonInstanceInfo.localHostname}</td>
      </tr>
      <tr>
        <th>Public Hostname</th><td>@{amazonInstanceInfo.publicHostname}</td>
      </tr>
      <tr>
        <th>Local IP</th><td>@{amazonInstanceInfo.localIp}</td>
      </tr>
      <tr>
        <th>Public IP</th><td>@{amazonInstanceInfo.publicIp}</td>
      </tr>
      <tr>
        <th>Instance Type</th><td><a href="http://aws.amazon.com/ec2/instance-types/">@{amazonInstanceInfo.instanceType}</a></td>
      </tr>
      <tr>
        <th>AvailabilityZone</th><td><a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.RegionsAndAvailabilityZones.html">@{amazonInstanceInfo.availabilityZone}</a></td>
      </tr>
      <tr>
        <th>Security Groups</th><td>@{amazonInstanceInfo.securityGroups}</td>
      </tr>
      <tr>
        <th>Ami Id</th><td>@{amazonInstanceInfo.amiId}</td>
      </tr>
      <tr>
        <th>Ami Launch Index</th><td>@{amazonInstanceInfo.amiLaunchIndex}</td>
      </tr>
      </table>
    }

    @admin("Clusters Overview") {
        <table class="table table-condensed table-striped">
            <thead>
              <th>Type</th> <th>ZK Id</th> <th>IPs</th> <th>State</th> <th>Version</th> <th>Instance</th> <th>AWS Details</th>
            </thead>
            <tbody>
            @for(cmi <- data) {
                <tr class="@(if (!(cmi.state.name=="up" || cmi.state.name=="backing_up")) "error" else "")" style="font-weight: @(if (cmi.isLeader) "bold" else "normal");">
                    <td>@cmi.serviceType.name</td>
                    <td>@cmi.zkid</td>
                    <td>@cmi.instanceInfo.localIp / @cmi.instanceInfo.publicIp </td>
                    <td>@cmi.state.name</td>
                    <td>@{randomColor(cmi.version)}</td>
                    <td>@cmi.name</td>
                    <td>
                      <div id="@cmi.instanceInfo.instanceId" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                          <h3 id="myModalLabel">AWS Instance Details</h3>
                        </div>
                        <div class="modal-body">
                          <p>@showInstanceInfo(cmi.instanceInfo)</p>
                        </div>
                      </div>

                      <button type="button" data-toggle="modal" data-target="#@cmi.instanceInfo.instanceId" style="width: 100%;">Show</button>
                    </td>
                </tr>
            }
            </tbody>
        </table>
        Leaders in Bold
        <script>
            setInterval(function(){location.reload();}, 5000);
        </script>
    }

