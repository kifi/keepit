@(rekeeps:Seq[(com.keepit.model.RichReKeep, Option[com.keepit.model.PageInfo], Option[com.keepit.model.ImageInfo])], showImage:Boolean, page:Int, rekeepsCount:Int, pageSize:Int)

@otherPagesRoute(page:Int) = {@com.keepit.controllers.admin.routes.AdminAttributionController.rekeepsView(page, pageSize, showImage)}

@admin(rekeepsCount + " Re-Keeps") {

    <h2>Showing @rekeeps.length ReKeeps (page @(page + 1))</h2>

    <ul>
        <li>The following shows a <i>global</i> list of recognized <i>rekeep</i> events.</li>
        <li>Currently, a rekeep is recognized when a user does a search (say on google), clicks on a <b>kifi</b> results, and <i>then</i> <b>keeps</b> the result.
        <li>See the <a href="@com.keepit.controllers.admin.routes.AdminAttributionController.keepClicksView(0,50,false)">Keep Clicks page</a> for more information.</li>
    </ul>

    @adminHelper.pagination(page, rekeepsCount, pageSize, otherPagesRoute _) {
        <table class="table table-striped">
            <th><tr>
                <td>Id</td>
                <td>Date</td>
                <td>keeper</td>
                <td>keep</td>
                <td>Re-keeper</td>
                <td>Re-keep</td>
                <td>attr_factor (1/n)</td>
                <td>uriId</td>
                <td>title</td>
                @if(showImage){ <td>image</td> }
            </tr></th>
            @for((rekeep, pageOpt, imgOpt) <- rekeeps){
            <tr>
                <td>@rekeep.id</td>
                <td>@adminHelper.dateDisplay(rekeep.createdAt)</td>
                <td>@adminHelper.userDisplay(rekeep.keeper)</td>
                <td>@rekeep.keep.id.get</td>
                <td>@adminHelper.userDisplay(rekeep.srcUser)</td>
                <td>@rekeep.srcKeep.id.get</td>
                <td>@rekeep.attributionFactor</td>
                <td>@rekeep.uri.id</td>
                <td><a href="@rekeep.uri.url">@rekeep.uri.title</a></td>
                @if(showImage && imgOpt.isDefined){ <td><img src="@imgOpt.get.url" width="50" height="50" alt="no image" /></td> }
            </tr>
            }
        </table>
    }

}