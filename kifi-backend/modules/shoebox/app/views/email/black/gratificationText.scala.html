@(userId: Id[User],
libFollows: com.keepit.model.CountData[Library],
libViews: com.keepit.model.CountData[Library],
keepViews: com.keepit.model.CountData[Keep],
rekeeps: com.keepit.model.CountData[Keep]
)
@import com.keepit.common.mail.template.helpers._
@import com.keepit.model.GratificationData._
@singularOrPlural(word: String, quantity: Int) = @{ quantity match { case 1 => word; case _ => word + "s" } }
Hey @firstName(userId), look at how well you've done on Kifi this week!
@if(libFollows.totalCount >= MIN_FOLLOWS) {
You had @{libFollows.totalCount} @singularOrPlural("follow", libFollows.totalCount) across all of your libraries:
    @for((libId, followCount) <- libFollows.sortedCountById.take(LIST_LIMIT)) {
    @{followCount} @singularOrPlural("follow", followCount) on @libraryName(libId)
    }
}

@if(libViews.totalCount >= MIN_LIB_VIEWS) {
You had @{libViews.totalCount} @singularOrPlural("view", libViews.totalCount) across all of your libraries:
    @for((libId, viewCount) <- libViews.sortedCountById.take(LIST_LIMIT)) {
        @{viewCount} @singularOrPlural("view", viewCount) on @libraryName(libId)
    }
}

@if(keepViews.totalCount >= MIN_KEEP_VIEWS) {
You had @{keepViews.totalCount} @singularOrPlural("view", keepViews.totalCount) across all of your keeps:
    @for((keepId, viewCount) <- keepViews.sortedCountById.take(LIST_LIMIT)) {
        @{viewCount} @singularOrPlural("view", viewCount) on @keepName(keepId)
    }
}

@if(rekeeps.totalCount >= MIN_REKEEPS) {
You had @{rekeeps.totalCount} total @singularOrPlural("rekeep", rekeeps.totalCount):
    @for((keepId, count) <- rekeeps.sortedCountById.take(LIST_LIMIT)) {
        @{count} @singularOrPlural("rekeep", count) on @keepName(keepId)
    }
}

@if(libFollows.totalCount >= MIN_FOLLOWS || libViews.totalCount >= MIN_LIB_VIEWS || keepViews.totalCount >= MIN_KEEP_VIEWS || rekeeps.totalCount >= MIN_REKEEPS){
What other stats would you like to see? Please let me know if you have any questions, suggestions, or comments about Kifi!
} else {
We at Kifi hope you're having a great week.
}

Cheers,
The Kifi Team
