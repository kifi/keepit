@(inviteeId: Option[Id[User]],
inviterId: Id[User],
inviteMsg: Option[String],
libraryInfo: com.keepit.model.LibraryInfo,
passPhrase: Option[String],
authToken: String,
inviteAccess: LibraryAccess
)

@import com.keepit.common.mail.template.helpers._
@libraryUrl = @{htmlUrl(baseUrl + libraryInfo.url + "?authToken=" + authToken + "&", "libraryInviteLink", inviteeId.nonEmpty)}

@* setting up message components that depend on conditionals *@
@emailMessage = {
@if(inviteAccess == LibraryAccess.READ_ONLY) {
<p>I'm using Kifi to share my knowledge. Check out the library I created: @libraryInfo.name.</p>
<p>@libraryInfo.shortDescription.map { description => s"Here's what it's about: $description" }.getOrElse("")</p>
<p><a href="@libraryUrl">www.kifi.com@libraryInfo.url</a></p>
} else {
<p>Please help me build the @libraryInfo.name Kifi library - <a href="@libraryUrl">www.kifi.com@libraryInfo.url</a>,
    so we can collaborate together. It's a great way to organize the links that we find.</p>
}
}

@salutation = {
@if(inviteeId.isEmpty) {
Hello,
} else {
Hello @firstName(inviteeId.get),
}
}


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
@if(inviteMsg.isEmpty) {
@salutation
@emailMessage
@firstName(inviterId)
} else {
@inviteMsg.get
<p><a href="@libraryUrl"</a>www.kifi.com@libraryInfo.url</p>
@firstName(inviterId)
}
</body>
</html>
