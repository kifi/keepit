@(id: Option[ExternalId[Invitation]] = None, socialUser: Option[SocialUserInfo] = None, msg: Option[String] = None,
    skipLetMeIn: Boolean = false, newSignup: Boolean = false)

@helper.main(title = "Welcome to Kifi!", hiddenElements = Seq("header"), head = Html(s"""
    <meta property="og:url" content="https://www.kifi.com${id map (com.keepit.controllers.website.routes.InviteController.acceptInvite(_).url) getOrElse com.keepit.controllers.website.routes.HomeController.home()}">
    <meta property="og:image" content="https://www.kifi.com/assets/images/logo_square.png">
    <meta property="og:title" content="${if (id.isDefined && socialUser.isDefined) s"You're invited to join Kifi." else "Welcome to Kifi!"}">
    <meta property="og:description" content="${if (id.isDefined && socialUser.isDefined) s"Hey ${socialUser.get.fullName}, you're invited to join Kifi! Click here to sign up." else "Welcome to Kifi!"}">
    <meta property="og:site_name" content="Kifi">
    """)) {
  <section class="content clearfix text_center welcome">
    <h1>Welcome to the <img src="@routes.Assets.at("images/logo2.png")" width="103" height="58" class="logo2"> private beta!</h1>

    @msg.map { m =>
      <p class="error-message">@m</p>
    }.getOrElse {
      <p>Kifi is still in stealth mode and is open for<br>beta testers upon invitation only</p>
    }

    <div class="welcome_btn@if(skipLetMeIn){ clicked}">
      <div class="letmein">
        <a href="javascript:" class="big blue btn" id="letmein">
          @if(id.isDefined && socialUser.isDefined) {
            It's me, @socialUser.get.fullName.
          }
          Let me in!
        </a>
      </div>
      <div class="networks">
      @for(network <- SocialNetworks.SUPPORTED.sortBy(network => !socialUser.exists(_.networkType == network))) {
        @if(socialUser.isEmpty || socialUser.get.networkType == network) {
          <a href="@com.keepit.controllers.core.routes.AuthController.login(network.name)" class="big blue btn">
            Log in with @network.displayName
          </a>
          @if(newSignup) {
            <a href="@com.keepit.controllers.core.routes.AuthController.signup(network.name)" class="big blue btn">
              Sign up with @network.displayName
            </a>
          }
        } else {
          <br>
          <a href="@com.keepit.controllers.core.routes.AuthController.login(network.name)" class="btn">
            I want to log in with @network.displayName instead
          </a>
        }
      }
      </div>
      @if(newSignup) {
        <a href="javascript:" class="btn" id="userpass_login">Log in with email and password</a><br>
        <div class="userpass_login">
          <form method="post" action="@com.keepit.controllers.core.routes.AuthController.login("userpass")">
            <input type="text" placeholder="Email Address" name="username"><br>
            <input type="password" placeholder="Password" name="password"><br>
            <input type="submit" class="blue btn" value="Log in">
          </form>
        </div>
        <a href="javascript:" class="btn" id="userpass_signup">Sign up with email and password</a>
        <div class="userpass_signup">
          <form method="post" action="@com.keepit.controllers.core.routes.AuthController.handleUsernamePasswordSignup()">
            <input type="text" placeholder="Email Address" name="email"><br>
            <input type="password" placeholder="Password" name="password.1"><br>
            <input type="password" placeholder="Confirm Password" name="password.2"><br>
            <input type="submit" class="blue btn" value="Sign up">
          </form>
        </div>
      }
    </div>
  </section>
}

<script>
$(function() {
  $("#letmein").click(function() {
    $(".welcome_btn").addClass("clicked");
  });
  $("#userpass_login").click(function() {
    $(".userpass_login").toggleClass("clicked");
  });
  $("#userpass_signup").click(function() {
    $(".userpass_signup").toggleClass("clicked");
  });
});
</script>
