@(email: String, opts: Seq[com.keepit.common.mail.ElectronicMailCategory], msg: Option[String])

@import com.keepit.common.mail.PostOffice.Categories
@invite = @{ !opts.contains(Categories.ALL) && !opts.contains(Categories.User.INVITATION) }
@message = @{ !opts.contains(Categories.ALL) && !opts.contains(Categories.User.MESSAGE) }
@all = @{ !opts.contains(Categories.ALL) }

@styles = {
<link rel="stylesheet" href="/assets/css/optout.css">
}

@content = {
  <h1 class="main-logo">kifi</h1>
  <h2 class="page-title">Opt-out of Kifi Emails</h2>

  <section>
    <h3>@email@if(msg.isDefined){ — @msg }</h3>
    <p>Uncheck any email types you do not want to recieve, or opt-out of all Kifi emails.</p>
    <p>You current may recieve emails about:</p>
    <form id="optout" method="POST">

      <label>
        <input type="checkbox" name="message" value="true" @if(message){checked}> Kifi Messages from friends
      </label>
      <label>
        <input type="checkbox" name="invite" value="true" @if(invite){checked}> Invitations to join Kifi from friends
      </label>
      <input type="hidden" name="all" value="if(all){true}else{false}" id="can-recieve-emails">

      <span class="optout" id="update">Update email preferences</span>
      <span class="optout" id="all">Opt-out of all emails</span>
    </form>
  </section>
}

@scripts = {
  <script>
    $(function() {
      $form = $("#optout");
      $("#update").click(function() {
        $("#can-recieve-emails").val("true");
        $form.submit();
      });
      $("#all").click(function() {
        $("#can-recieve-emails").val("false");
        $form.submit();
      });
    });
  </script>
}


@views.html.auth.helper.page(title = "kifi.com • Opt-out of emails", content = content, styles = styles, scripts = scripts)
