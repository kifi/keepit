<div class="kf-main-keeps">
  <div class="kf-keep-selection-tools" ng-if="editMode.enabled">
    <div class="kf-keep-checkbox-icon sprite sprite-checkbox-icon"></div>
    <!-- Reuse or remove -->
    <!--<span class="kf-check-all" ng-class="{ enabled: isCheckEnabled(), checked: isSelectedAll(),  'multi-checked': isMultiChecked() }" ng-click="toggleSelectAll()" ng-mouseover="onMouseoverCheckAll()" ng-mouseout="onMouseoutCheckAll()"></span>-->
    <div class="kf-keep-selection-tools-body">
      <div class="kf-keep-selected-count">
        <span class="kf-keep-selected-count-number">{{getSelected().length}}</span>
        <span class="kf-keep-selected-count-text" ng-pluralize count="getSelected().length" when="{'1': 'keep selected', 'other': 'keeps selected'}"></span>
      </div>
      <div class="kf-keep-selection-options" ng-if="getSelected().length">
        <div class="kf-keep-selection-option"><span ng-click="togglePrivate()">Make {{selectionPrivacyState()}}</span></div>
        <div class="kf-keep-selection-option"><span ng-click="unkeep()">Unkeep</span></div>
        <div class="kf-keep-selection-option"><span>Add Tags</span></div>
      </div>
    </div>
  </div>
  <ol class="kf-my-keeps">
    <div ng-repeat="keep in keeps track by $index">
    <div kf-keep is-selected="!!isSelected(keep)"
        keep="keep" me="me" toggle-select="toggleSelect(keep)" click-action="onClickKeep(keep, event)" drag-keeps="dragKeeps(keep, event, mouseX, mouseY)" stop-dragging-keeps="stopDraggingKeeps()" edit-mode="editMode" select-keep="selectKeep" unselect-keep="unselectKeep"></div>
    </div>
  </ol>
  <ol class="kf-shadow-dragged-keeps">
    <span class="kf-shadow-keep-first">
      <li ng-if="data.draggedKeeps.length >= 1" class="kf-dragged-keep" kf-keep kf-shadow-keep-first keep="data.draggedKeeps[0]" is-selected="!!isSelected(keep)"><li>
    </span>
    <span class="kf-shadow-keep-second">
      <li ng-if="data.draggedKeeps.length === 3" class="kf-dragged-keep" kf-keep kf-shadow-keep-first keep="data.draggedKeeps[1]" is-selected="!!isSelected(keep)"><li>
    </span>
    <span class="kf-shadow-keep-ellipsis" ng-class="{'active': data.draggedKeeps.length >= 4}">
      <div class="kf-shadow-keep-ellipsis-line"></div>
      <div class="kf-shadow-keep-ellipsis-counter">{{data.draggedKeeps.length - 2}} other keeps selected</div>
    </span>
    <div class="kf-shadow-keep-ellipsis-counter-hidden">{{data.draggedKeeps.length - 2}} other keeps selected</div>
    <span class="kf-shadow-keep-last">
      <li ng-if="data.draggedKeeps.length >= 2" class="kf-dragged-keep" kf-keep kf-shadow-keep-last keep="data.draggedKeeps[data.draggedKeeps.length-1]" is-selected="!!isSelected(keep)"></li>
    </span>
  </ol>
  <div class="kf-keep-group-title-fixed"></div>
  <img class="kf-keeps-loading" ng-show="keepsLoading" src="/img/wait.gif">
  <a class="kf-keeps-load-more" ng-show="isShowMore()" href="javascript:" ng-click="scrollNext()">Show more</a>
</div>
