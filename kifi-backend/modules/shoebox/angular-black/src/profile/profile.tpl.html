<div ng-controller="ProfileCtrl">
  <div class="profile-wrapper">
    <div class="profile">
      <h2>Settings</h2>
      <a href="javascript:" class="profile-logout" ng-click="logout()">LOG OUT</a>
      <div class="profile-container">
        <div kf-profile-image pic-url="me.picUrl"></div>
        <div class="profile-input-wrapper">
          <div class="profile-input-title">Name</div>
          <div class="profile-input-box profile-input-box-name">
            <span class="profile-input-placeholder">
              <span class="profile-placeholder-first-name">{{me.firstName}}</span> <span class="profile-placeholder-last-name">{{me.lastName}}</span>
            </span>
            <input class="profile-input-input profile-first-name" disabled type="text" name="firstName" placeholder="First name" value="{{me.firstName}}" novalidate>
            <input class="profile-input-input profile-last-name" disabled type="text" name="lastName" placeholder="Last name" value="{{me.lastName}}" novalidate>
          </div>
        </div>
        <div class="profile-input-wrapper profile-email">
          <div class="profile-input-title">Contact email</div>
          <div kf-profile-input input-state="emailInput" input-validate-action="validateEmail(value)"  input-save-action="saveEmail(value)" explicit-enabling="true">
            <input class="profile-input-input profile-email-input"
              ng-disabled="!emailInput.editing"
              kf-focus-if focus-cond="emailInput.editing"
              ng-model="emailInput.value"
              type="text" name="email" placeholder="Enter your email address" novalidate>
          </div>
          <div kf-modal show="showEmailChangeDialog.value">
            <div kf-basic-modal-content with-cancel action-text="Continue" action="confirmSaveEmail()" cancel="cancelSaveEmail()">
              <p>You are about to change your primary email to <span class="email-address">{{me.primaryEmail.address}}</span>.</p>
              <p>We will send a verification email to this email address to prove that you own it. To verify, please click on a verification link on the email.</p>
            </div>
          </div>
        </div>
        <div class="profile-email-address-unverified" ng-if="isUnverified({value: me.primaryEmail})">
          Your email is pending your verification
          (<a class="profile-email-pending-resend" href="javascript:" ng-click="resendVerificationEmail()">Resend verification</a>).
        </div>
        <div class="profile-email-address-pending" ng-if="me.primaryEmail.isPendingPrimary">
          Your new primary email, <span class="profile-email-address-pending-email">{{me.primaryEmail.address}}</span>, is pending your verification
          (<a class="profile-email-pending-resend" href="javascript:" ng-click="resendVerificationEmail()">Resend verification</a>,
          <a class="profile-email-pending-cancel" href="javascript:" ng-click="cancelPendingPrimary()">Cancel</a>).
        </div>
        <div kf-profile-email-addresses input-state="addEmailInput" email-list="me.emails" validate-email-action="validateEmail(value)" add-email-action="addEmail(value)" resend-verification-email-action="resendVerificationEmail(value)"></div>
        <div kf-modal show="showResendVerificationEmailDialog.value">
          <div kf-basic-modal-content title="{{emailForVerificationModalTitle}}">
            <p>You will shortly receive a verification email from us at the following address: <span class="email-address">{{emailForVerification}}</span>.</p>
            <p>To verify, please click on a verification link on the email.</p>
          </div>
        </div>
        <div kf-profile-change-password></div>
      </div>
      <div class="profile-section">
        <h3>Connect your social networks to Kifi</h3>
        <h5>Find which of your friends are using Kifi</h5>
        <ul class="profile-networks">
          <li kf-facebook-connect-button data-network="facebook" ng-class="{ 'connected': isFacebookConnected }">
            <a class="profile-nw nw-facebook" href="https://www.kifi.com/link/facebook" target="_self" ng-click="connectFacebook()" ng-show="!isFacebookConnected">Facebook</a>
            <a class="profile-nw nw-facebook" ng-href="{{fbProfileUrl}}" target="_blank" ng-show="isFacebookConnected">Facebook</a>
            <span class="profile-nw-connected">
              <span class="profile-placeholder">&nbsp;</span>
              <span class="profile-connected">Connected</span>
              <a class="profile-disconnect" href="javascript:" ng-click="disconnectFacebook()">Disconnect?</a>
            </span>
          </li>

          <li kf-linkedin-connect-button data-network="linkedin" ng-class="{ 'connected': isLinkedInConnected }">
            <a class="profile-nw nw-linkedin" href="https://www.kifi.com/link/linkedin" target="_self" ng-click="connectFacebook()" ng-show="!isLinkedInConnected">LinkedIn</a>
            <a class="profile-nw nw-linkedin" ng-href="{{liProfileUrl}}" target="_blank" ng-show="isLinkedInConnected">LinkedIn</a>
            <span class="profile-nw-connected">
              <span class="profile-placeholder">&nbsp;</span>
              <span class="profile-connected">Connected</span>
              <a class="profile-disconnect" href="javascript:" ng-click="disconnectLinkedIn()">Disconnect?</a>
            </span>
          </li>
        </ul>
      </div>
      <div class="profile-section" kf-email-import></div>
      <div class="profile-section">
        <h3>Export Your Keeps</h3>
        <h5>Keep URL, date kept, and any tags will be included in a HTML netscape format file</h5>

        <a class="profile-export" ng-href="{{getExportUrl()}}" ng-click="exportKeeps()" target="_self" ng-class="{'export-first':!exported, 'export-again':exported}">{{getExportButtonText()}}</a>
        <p>
        <span class="profile-export-status" ng-show="exported">
          <span class="profile-placeholder">&nbsp;</span>
          <span>You can find the file in your Download folder</span>
        </span>
        </p>
      </div>
    </div>
  </div>
</div>
