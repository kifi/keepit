<html>
  <head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="selectionlib.js"></script>
<script src="jquery.range.js"></script>

<script src="jquery.event.drag-2.2.js"></script>
<script src="jquery.event.drag.live-2.2.js"></script>
<script src="jquery.event.drop-2.2.js"></script>
<script src="jquery.event.drop.live-2.2.js"></script>
<script src="mustache.js"></script>
    <style>
      .content {
        width:330px;
        border:1px solid #ccc;
        padding:0px;
        margin:0px;
        box-sizing: border-box;

      }

      * {
        box-sizing: border-box;
      }



ul.kifi_social_tabs {
  margin:0px;
  padding:0px;
}

.kifi_social_tabs li {
  list-style:none;
  display:inline;
  padding:0px;
  margin:0px;
  background-color: #FAF9F9;
}

.kifi_social_tabs span {
  padding:5px 10px;
  display:inline-block;
  border: 1px solid rgb(190, 190, 190);
  text-decoration:none;
  top:1px;
  position:relative;
  border-radius: 5px 5px 0px 0px;
  background-color: #FAF9F9;
}

.kifi_social_tabs .active {
    border-bottom: 1px solid #FAF9F9;
}

.comment_body_view {
  background-color: #FAF9F9;
  border: 1px solid #BEBEBE;
  min-height: 200px;
  overflow: auto;
  max-height:310px;
}

.comment_post_view {
  background-color: #FAF9F9;
  height: 100px;
  overflow: hidden;
  position: absolute;
  bottom:0;
}

img.comment-avatar {
  width:30px;
  height:30px;
  position:relative;
  float:left;
}

.flexcontainer {
  height:410px;
  position: relative;
}

.heart {
    position: relative;
    width: 20px;
    height: 20px;
    float:right;
    left:-40px;
}
.heart span {
  position: relative;
  z-index: 2;
  font-size:24px;
  text-align: center;
  width:100%;
}
.heart:before,
.heart:after {
    z-index:1;
    position: absolute;
    content: "";
    left: 20px;
    top: 0;
    width: 20px;
    height: 32px;
    background: #F2C0C1;
    -moz-border-radius: 100px 100px 0 0;
    border-radius: 100px 100px 0 0;
    -webkit-transform: rotate(-45deg);
       -moz-transform: rotate(-45deg);
        -ms-transform: rotate(-45deg);
         -o-transform: rotate(-45deg);
            transform: rotate(-45deg);
    -webkit-transform-origin: 0 100%;
       -moz-transform-origin: 0 100%;
        -ms-transform-origin: 0 100%;
         -o-transform-origin: 0 100%;
            transform-origin: 0 100%;
}

.heart:hover:after,.heart:hover:before {
  background: #F23030;
}
.heart:after {
    left: 0;
    -webkit-transform: rotate(45deg);
       -moz-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
         -o-transform: rotate(45deg);
            transform: rotate(45deg);
    -webkit-transform-origin: 100% 100%;
       -moz-transform-origin: 100% 100%;
        -ms-transform-origin: 100% 100%;
         -o-transform-origin: 100% 100%;
            transform-origin :100% 100%;
}

.hearts {
  position:relative;
  float:right;
}
div#image-crop-overlay {
  background-color : #ffffff;
  overflow : hidden;
}

div#image-crop-outline {
  background : #ffffff url('outline.gif');
  overflow : hidden;
}

    </style>
    <script>
function loadFile(name, callback) {
  var req = new XMLHttpRequest();
  req.open("GET",name, true);
  req.onreadystatechange = function() {
      if (req.readyState == 4 && req.status == 200) {
          callback(req.responseText);
      }
  };
  req.send(null);
}


function getTemplate(name, params, callback, partials) {
  loadFile(name, function(contents) {
    var tb = Mustache.render(
        contents,
        params,
        partials
    );
    callback(tb);
  });
}

loadFile("comments_list.html", function(comment_list) {
  var partials = {
    "comment_body_view": comment_list
  };

  var params = {
    view: "comments_list",
    comments: [
      {
        "name": "Andrew Conner",
        "avatar": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc6/275024_71105121_451954280_n.jpg",
        "timestamp": 1352921580212,
        "text": "This is a sample comment",
        "replies": 3,
        "hearts": 5
      },
      {
        "name": "Andrew Conner",
        "avatar": "https://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc6/275024_71105121_451954280_n.jpg",
        "timestamp": 1352921580212,
        "text": "This is a sample comment",
        "replies": 3,
        "hearts": 5
      }
    ]
  }

  getTemplate("comments_view.html", params, function(tmpl) {
    $('.content').append(tmpl);
  }, partials);
});

    </script>



  </head>
  <body>
  
  <div class="content">
    
  </div>
  
  
<h1><span>Lorem Ipsum</span></h1>

<h4>"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."</h4>
<h5>"There is no one who loves pain itself, who seeks after it and wants to have it, simply because it is pain..."</h5>
<p>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla at arcu dolor. Praesent posuere tempor lorem. Praesent orci nunc, mollis ac laoreet at, sagittis eu nulla. Aliquam erat volutpat. Duis eget euismod justo. Duis pharetra hendrerit lectus, in convallis erat aliquam sit amet. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Maecenas pellentesque sem neque. Aliquam erat volutpat.
</p>
<span>
<p>
Nunc non metus at dolor hendrerit tincidunt convallis iaculis elit. Cras accumsan congue purus vitae commodo. Curabitur consequat magna nec magna mollis at blandit tortor fringilla. Mauris euismod interdum scelerisque. Nullam tristique tempor molestie. Fusce enim diam, lobortis ullamcorper tempor in, facilisis in nunc. In hac habitasse platea dictumst. Praesent ac nunc sem, eget porttitor sapien. Vestibulum non lectus in leo posuere sodales. Vivamus adipiscing, lorem vel venenatis vehicula, enim ante molestie tortor, ac pretium turpis lorem ac ipsum. Nulla nulla augue, lacinia sit amet porttitor a, porta a arcu. Sed consequat mi non ante vestibulum non mattis dui porttitor. Aliquam non lorem a erat cursus cursus ut vitae arcu. Ut pulvinar velit at urna malesuada vel semper elit feugiat. Aliquam quis purus libero.
</p>
<p>
<b>Mauris tempor urna et augue lobortis suscipit. Integer aliquam, eros in euismod consequat, tortor dui congue orci, ut rhoncus sem turpis eu ipsum. Nullam orci elit, ultrices ac adipiscing adipiscing, luctus quis nisl. Hey</b><i>Aliquam non turpis id massa congue consectetur. Vestibulum urna quam, sagittis ac pharetra a, commodo eu justo. In viverra auctor mi eu pretium. Praesent eu pellentesque diam. Vivamus semper sodales metus et tempus. Proin pretium vulputate tortor et pretium. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Integer vitae rhoncus dui. Vivamus in diam vitae nulla pharetra mollis. Nunc vitae convallis diam. Nulla pharetra, urna ac semper condimentum, arcu est tincidunt tellus, quis commodo dui elit in mi.</i>
</p></span>
    <script type="text/javascript">

(function() {jQuery.fn['bounds'] = function () {
  var bounds = {
    left: Number.POSITIVE_INFINITY,
    top: Number.POSITIVE_INFINITY,
    right: Number.NEGATIVE_INFINITY,
    bottom: Number.NEGATIVE_INFINITY,
    width: Number.NaN,
    height: Number.NaN
  };

  this.each(function (i,el) {
    var elQ = $(el);
    var off = elQ.offset();
    off.right = off.left + $(elQ).width();
    off.bottom = off.top + $(elQ).height();

    if (off.left < bounds.left)
    bounds.left = off.left;

    if (off.top < bounds.top)
    bounds.top = off.top;

    if (off.right > bounds.right)
    bounds.right = off.right;

    if (off.bottom > bounds.bottom)
    bounds.bottom = off.bottom;
  });

  bounds.width = bounds.right - bounds.left;
  bounds.height = bounds.bottom - bounds.top;
  return bounds;
}})();

jQuery(function($){
  $( document )
    .drag("start",function( ev, dd ){
      $('.not-dropped').removeClass('not-dropped');
      $('.selection').removeClass('selection');
      $('.active').removeClass('active');
      $('.dropped').removeClass('dropped');
      console.log("dragstart",this);
      return $('<div class="selection" />')
        .appendTo( document.body );
    },{distance: "50"})
    .drag(function( ev, dd ){
      console.log("drag",this);
      $( dd.proxy ).css({
        top: Math.min( ev.pageY, dd.startY ),
        left: Math.min( ev.pageX, dd.startX ),
        height: Math.abs( ev.pageY - dd.startY ),
        width: Math.abs( ev.pageX - dd.startX )
      });
    })
    .drag("end",function( ev, dd ) {
      console.log("dragend",dd,this);
      var minTop=9999,minLeft=9999,maxHeight=0,maxWidth=0;
      var elements = dd.drop;
      var bounds = $(elements).bounds();
      $(dd.proxy).css(bounds);
      // console.log(minTop,minLeft,maxHeight,maxWidth)
      // $( dd.proxy ).css({
      //   top: minTop,
      //   left: minLeft,
      //   height: maxHeight,
      //   width: maxWidth
      // });
      if($('.dropped').length <= 1) {
        $( dd.proxy ).remove();
      }
    });

  $('body *').not("script")
    .drop("start",function(){
      $( this ).addClass("active");
      $(document).not(this).addClass("not-active");
      console.log("dropstart",this);
    })
    .drop(function( ev, dd ){
      $( this ).addClass("dropped");
      console.log("drop",this);
    })
    .drop("end",function(){
      $( this ).removeClass("active");
      console.log("dropend",this);
    });
  $.drop({ multi: true, mode: "intersect" });

  $(document).click(function() {
      $('.not-dropped').removeClass('not-dropped');
      $('.selection').removeClass('selection');
      $('.active').removeClass('active');
      $('.dropped').removeClass('dropped');
  });  
});
</script>

<h1>Selection Drop Demo</h1>
<p>Click and drag to select any number of dashed boxes.</p>

<span>hi
<div class="drop">Jack</div>
<div class="drop">Kate</div>
<div class="drop">Hugo</div>
<div class="drop">James</div>
<div class="drop">John</div>
<div class="drop">Jin</div>
<div class="drop">Sun</div>
</span>
<div class="drop">Sayid</div>
<div class="drop">Walt</div>
<div class="drop">Michael</div>
<div class="drop">Claire</div>
<div class="drop">Aaron</div>
<div class="drop">Charlie</div>
<div class="drop">Desmond</div>
<div class="drop">Penny</div>
<div class="drop">Ben</div>
<div class="drop">Juliet</div>
<div class="drop">Richard</div>
<div class="drop">Alex</div>
<div class="drop">Miles</div>
<div class="drop">Charlotte</div>
<div class="drop">Daniel</div>
<div class="drop">Vincent</div>
<div class="drop">Frank</div>
<div class="drop">Jacob</div>

<style type="text/css">
.selection {
  position: absolute;
  border: 1px solid #89B;
  background: #BCE;
  background-color: #BEC;
  border-color: #8B9;
  opacity: .5;
  z-index:9999999999999999999;
  }
.size2 {
  height: 118px;
  line-height: 118px;
  }
.size3 {
  height: 178px;
  line-height: 178px;
  }
.drop {
  float: left;
  border: 1px dashed #888;
  background: #EEE;
  text-align: center;
  padding: 20px;
  margin: 0 10px 10px 0;
  }
.dropped {
  background-color: #EBC;
  border-color: #B89;
  } 
.active {  
  background-color: #CEB;
  border-color: #9B8;
  }

.not-dropped {
  opacity: .5;
}
</style>
  </body>
</html>